var ni=Object.defineProperty;var li=(n,e,t)=>e in n?ni(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var te=(n,e,t)=>(li(n,typeof e!="symbol"?e+"":e,t),t),ai=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Wt=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var xt=(n,e,t)=>(ai(n,e,"access private method"),t);import{d as ne,v as Be,g as De,o as u,e as v,F,l as J,f as k,i as m,t as z,c as K,q as I,s as B,_ as cn,L as ii,B as E,M as oi,N as ri,E as fe,O as Oe,h as P,P as Al,Q as zl,K as un,R as si,r as ie,S as ci,U as dn,V as Sl,W as Et,X as Fe,m as N,D as ve,Y as se,Z as We,$ as Tl,n as dt,a0 as jl,a1 as Ml,G as Ul,a2 as Vl,j as ce,a3 as Hl,a4 as Ol,p as Pl,J as T,a5 as he,a6 as Nl,a7 as Bl,a8 as pn,a as Dl,a9 as ui,aa as di,ab as Fl,ac as pi,ad as hi,ae as mi,af as vi,w as Ce,ag as gi,ah as fi,A as Wl,ai as ki,aj as ql,ak as yi,I as Ct,al as wi,am as bi,an as $i,ao as _i,ap as xi,aq as Ci,ar as Lt,as as Li,x as Ii,at as Ri,u as Ei}from"./app-DEw9raa7.js";import{_ as Ai}from"./YunFooter.vue_vue_type_script_setup_true_lang-CYufLakv.js";import{_ as Gl}from"./YunCard.vue_vue_type_script_setup_true_lang-BabP9Q9Y.js";import{_ as zi}from"./YunPageHeader.vue_vue_type_script_setup_true_lang-B8z3l9zt.js";import{s as Un}from"./index-C7yU5XnD.js";const Si=["lang"],Ti=["href"],ji=ne({__name:"YunOutlineItem",props:{headers:{},onClick:{type:Function},root:{type:Boolean}},setup(n){const{locale:e}=Be();return(t,l)=>{const i=De("YunOutlineItem",!0);return u(),v("ul",{class:B(t.root?"root":"nested")},[(u(!0),v(F,null,J(t.headers,({children:a,link:o,title:r,lang:s})=>(u(),v("li",{key:o,class:"va-toc-item",lang:s||k(e)},[m("a",{class:"outline-link",href:o,onClick:l[0]||(l[0]=(...d)=>t.onClick&&t.onClick(...d))},z(r),9,Ti),a!=null&&a.length?(u(),K(i,{key:0,headers:a,"on-click":t.onClick},null,8,["headers","on-click"])):I("v-if",!0)],8,Si))),128))],2)}}}),Mi=cn(ji,[["__scopeId","data-v-699db71a"]]),Ui=n=>(Al("data-v-75b693dc"),n=n(),zl(),n),Vi={class:"content"},Hi={class:"outline-title"},Oi={"aria-labelledby":"doc-outline-aria-label"},Pi=Ui(()=>m("span",{id:"doc-outline-aria-label",class:"visually-hidden"}," Table of Contents for current page ",-1)),Ni=ne({__name:"YunOutline",setup(n){const e=ii(),t=E(),l=E();oi(t,l);const{headers:i,handleClick:a}=ri();return(o,r)=>{const s=Mi;return fe((u(),v("div",{ref_key:"container",ref:t},[m("div",Vi,[m("div",Hi,z(k(e).outlineTitle||"On this page"),1),m("div",{ref_key:"marker",ref:l,class:"outline-marker"},null,512),m("nav",Oi,[Pi,P(s,{class:"va-toc relative z-1 css-i18n-toc",headers:k(i),"on-click":k(a),root:""},null,8,["headers","on-click"])])])],512)),[[Oe,k(i).length]])}}}),Bi=cn(Ni,[["__scopeId","data-v-75b693dc"]]),Di=m("div",{"i-ri-file-list-line":""},null,-1),Fi=[Di],Wi={class:"aside-container",flex:"~ col"},qi={key:0,m:"t-6 b-2",font:"serif black"},Gi=m("div",{class:"flex-grow"},null,-1),Zi={key:2,class:"custom-container"},Yi=ne({__name:"YunAside",setup(n){const e=un(),{t}=Be(),l=si();return(i,a)=>{const o=ci,r=Bi;return u(),v(F,null,[m("button",{class:"xl:hidden toc-btn shadow fixed yun-icon-btn z-350",opacity:"75",right:"2",bottom:"19",onClick:a[0]||(a[0]=s=>k(l).toggleRightSidebar())},Fi),P(o,{show:k(l).isRightSidebarOpen,onClick:a[1]||(a[1]=s=>k(l).toggleRightSidebar())},null,8,["show"]),I("  "),m("aside",{class:B(["va-card yun-aside",k(l).isRightSidebarOpen&&"open"]),m:"l-4",text:"center",overflow:"auto"},[m("div",Wi,[k(e).toc!==!1?(u(),v("h2",qi,z(k(t)("sidebar.toc")),1)):I("v-if",!0),k(e).toc!==!1?(u(),K(r,{key:1})):I("v-if",!0),Gi,i.$slots.default?(u(),v("div",Zi,[ie(i.$slots,"default")])):I("v-if",!0)])],2)],64)}}}),Ki=ne({__name:"YunArtalk",setup(n){return dn(Sl)||(void 0)(),(e,t)=>{const l=De("ArtalkClient");return u(),K(l)}}}),Qi=m("div",{id:"tcomment",w:"full"},null,-1),Xi=[Qi],Ji=ne({__name:"YunTwikoo",setup(n){return dn(Sl)||(void 0)(),(e,t)=>(u(),v("div",null,Xi))}}),Zl={"Content-Type":"application/json"},Ue=n=>`${n.replace(/\/?$/,"/")}api/`,qe=(n,e="")=>{if(typeof n=="object"&&n.errno)throw new TypeError(`${e} failed with ${n.errno}: ${n.errmsg}`);return n},hn=({serverURL:n,lang:e,paths:t,type:l,signal:i})=>fetch(`${Ue(n)}article?path=${encodeURIComponent(t.join(","))}&type=${encodeURIComponent(l.join(","))}&lang=${e}`,{signal:i}).then(a=>a.json()).then(a=>qe(a,"Get counter").data),pt=({serverURL:n,lang:e,path:t,type:l,action:i})=>fetch(`${Ue(n)}article?lang=${e}`,{method:"POST",headers:Zl,body:JSON.stringify({path:t,type:l,action:i})}).then(a=>a.json()).then(a=>qe(a,"Update counter").data),Yl=({serverURL:n,lang:e,path:t,page:l,pageSize:i,sortBy:a,signal:o,token:r})=>{const s={};return r&&(s.Authorization=`Bearer ${r}`),fetch(`${Ue(n)}comment?path=${encodeURIComponent(t)}&pageSize=${i}&page=${l}&lang=${e}&sortBy=${a}`,{signal:o,headers:s}).then(d=>d.json()).then(d=>qe(d,"Get comment data").data)},Kl=({serverURL:n,lang:e,token:t,comment:l})=>{const i={"Content-Type":"application/json"};return t&&(i.Authorization=`Bearer ${t}`),fetch(`${Ue(n)}comment?lang=${e}`,{method:"POST",headers:i,body:JSON.stringify(l)}).then(a=>a.json())},Ql=({serverURL:n,lang:e,token:t,objectId:l})=>fetch(`${Ue(n)}comment/${l}?lang=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}).then(i=>i.json()).then(i=>qe(i,"Delete comment")),Le=({serverURL:n,lang:e,token:t,objectId:l,comment:i})=>fetch(`${Ue(n)}comment/${l}?lang=${e}`,{method:"PUT",headers:{...Zl,Authorization:`Bearer ${t}`},body:JSON.stringify(i)}).then(a=>a.json()).then(a=>qe(a,"Update comment")),eo=({serverURL:n,lang:e,paths:t,signal:l})=>fetch(`${Ue(n)}comment?type=count&url=${encodeURIComponent(t.join(","))}&lang=${e}`,{signal:l}).then(i=>i.json()).then(i=>qe(i,"Get comment count").data),Xl=({lang:n,serverURL:e})=>{const t=(window.innerWidth-450)/2,l=(window.innerHeight-450)/2,i=window.open(`${e.replace(/\/$/,"")}/ui/login?lng=${encodeURIComponent(n)}`,"_blank",`width=450,height=450,left=${t},top=${l},scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no`);return i==null||i.postMessage({type:"TOKEN",data:null},"*"),new Promise(a=>{const o=({data:r})=>{!r||typeof r!="object"||r.type!=="userInfo"||r.data.token&&(i==null||i.close(),window.removeEventListener("message",o),a(r.data))};window.addEventListener("message",o)})},to=({serverURL:n,lang:e,paths:t,signal:l})=>hn({serverURL:n,lang:e,paths:t,type:["time"],signal:l}),no=n=>pt({...n,type:"time",action:"inc"});var st=new Map;function lo(n){var e=st.get(n);e&&e.destroy()}function ao(n){var e=st.get(n);e&&e.update()}var ot=null;typeof window>"u"?((ot=function(n){return n}).destroy=function(n){return n},ot.update=function(n){return n}):((ot=function(n,e){return n&&Array.prototype.forEach.call(n.length?n:[n],function(t){return function(l){if(l&&l.nodeName&&l.nodeName==="TEXTAREA"&&!st.has(l)){var i,a=null,o=window.getComputedStyle(l),r=(i=l.value,function(){d({testForHeightReduction:i===""||!l.value.startsWith(i),restoreTextAlign:null}),i=l.value}),s=(function(w){l.removeEventListener("autosize:destroy",s),l.removeEventListener("autosize:update",c),l.removeEventListener("input",r),window.removeEventListener("resize",c),Object.keys(w).forEach(function(p){return l.style[p]=w[p]}),st.delete(l)}).bind(l,{height:l.style.height,resize:l.style.resize,textAlign:l.style.textAlign,overflowY:l.style.overflowY,overflowX:l.style.overflowX,wordWrap:l.style.wordWrap});l.addEventListener("autosize:destroy",s),l.addEventListener("autosize:update",c),l.addEventListener("input",r),window.addEventListener("resize",c),l.style.overflowX="hidden",l.style.wordWrap="break-word",st.set(l,{destroy:s,update:c}),c()}function d(w){var p,$,S=w.restoreTextAlign,_=S===void 0?null:S,b=w.testForHeightReduction,h=b===void 0||b,y=o.overflowY;if(l.scrollHeight!==0&&(o.resize==="vertical"?l.style.resize="none":o.resize==="both"&&(l.style.resize="horizontal"),h&&(p=function(M){for(var A=[];M&&M.parentNode&&M.parentNode instanceof Element;)M.parentNode.scrollTop&&A.push([M.parentNode,M.parentNode.scrollTop]),M=M.parentNode;return function(){return A.forEach(function(U){var oe=U[0],O=U[1];oe.style.scrollBehavior="auto",oe.scrollTop=O,oe.style.scrollBehavior=null})}}(l),l.style.height=""),$=o.boxSizing==="content-box"?l.scrollHeight-(parseFloat(o.paddingTop)+parseFloat(o.paddingBottom)):l.scrollHeight+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth),o.maxHeight!=="none"&&$>parseFloat(o.maxHeight)?(o.overflowY==="hidden"&&(l.style.overflow="scroll"),$=parseFloat(o.maxHeight)):o.overflowY!=="hidden"&&(l.style.overflow="hidden"),l.style.height=$+"px",_&&(l.style.textAlign=_),p&&p(),a!==$&&(l.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),a=$),y!==o.overflow&&!_)){var V=o.textAlign;o.overflow==="hidden"&&(l.style.textAlign=V==="start"?"end":"start"),d({restoreTextAlign:V,testForHeightReduction:!0})}}function c(){d({testForHeightReduction:!0,restoreTextAlign:null})}}(t)}),n}).destroy=function(n){return n&&Array.prototype.forEach.call(n.length?n:[n],lo),n},ot.update=function(n){return n&&Array.prototype.forEach.call(n.length?n:[n],ao),n});var At=ot;function mn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ve=mn();function Jl(n){Ve=n}const ea=/[&<>"']/,io=new RegExp(ea.source,"g"),ta=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,oo=new RegExp(ta.source,"g"),ro={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vn=n=>ro[n];function pe(n,e){if(e){if(ea.test(n))return n.replace(io,Vn)}else if(ta.test(n))return n.replace(oo,Vn);return n}const so=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function co(n){return n.replace(so,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const uo=/(^|[^\[])\^/g;function X(n,e){let t=typeof n=="string"?n:n.source;e=e||"";const l={replace:(i,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(uo,"$1"),t=t.replace(i,o),l},getRegex:()=>new RegExp(t,e)};return l}function Hn(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const ct={exec:()=>null};function On(n,e){const t=n.replace(/\|/g,(a,o,r)=>{let s=!1,d=o;for(;--d>=0&&r[d]==="\\";)s=!s;return s?"|":" |"}),l=t.split(/ \|/);let i=0;if(l[0].trim()||l.shift(),l.length>0&&!l[l.length-1].trim()&&l.pop(),e)if(l.length>e)l.splice(e);else for(;l.length<e;)l.push("");for(;i<l.length;i++)l[i]=l[i].trim().replace(/\\\|/g,"|");return l}function It(n,e,t){const l=n.length;if(l===0)return"";let i=0;for(;i<l;){const a=n.charAt(l-i-1);if(a===e&&!t)i++;else if(a!==e&&t)i++;else break}return n.slice(0,l-i)}function po(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let l=0;l<n.length;l++)if(n[l]==="\\")l++;else if(n[l]===e[0])t++;else if(n[l]===e[1]&&(t--,t<0))return l;return-1}function Pn(n,e,t,l){const i=e.href,a=e.title?pe(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){l.state.inLink=!0;const r={type:"link",raw:t,href:i,title:a,text:o,tokens:l.inlineTokens(o)};return l.state.inLink=!1,r}return{type:"image",raw:t,href:i,title:a,text:pe(o)}}function ho(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const l=t[1];return e.split(`
`).map(i=>{const a=i.match(/^\s+/);if(a===null)return i;const[o]=a;return o.length>=l.length?i.slice(l.length):i}).join(`
`)}class zt{constructor(e){te(this,"options");te(this,"rules");te(this,"lexer");this.options=e||Ve}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const l=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?l:It(l,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const l=t[0],i=ho(l,t[3]||"");return{type:"code",raw:l,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let l=t[2].trim();if(/#$/.test(l)){const i=It(l,"#");(this.options.pedantic||!i||/ $/.test(i))&&(l=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let l=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);l=It(l.replace(/^ *>[ \t]?/gm,""),`
`);const i=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(l);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:a,text:l}}}list(e){let t=this.rules.block.list.exec(e);if(t){let l=t[1].trim();const i=l.length>1,a={type:"list",raw:"",ordered:i,start:i?+l.slice(0,-1):"",loose:!1,items:[]};l=i?`\\d{1,9}\\${l.slice(-1)}`:`\\${l}`,this.options.pedantic&&(l=i?l:"[*+-]");const o=new RegExp(`^( {0,3}${l})((?:[	 ][^\\n]*)?(?:\\n|$))`);let r="",s="",d=!1;for(;e;){let c=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let w=t[2].split(`
`,1)[0].replace(/^\t+/,h=>" ".repeat(3*h.length)),p=e.split(`
`,1)[0],$=0;this.options.pedantic?($=2,s=w.trimStart()):($=t[2].search(/[^ ]/),$=$>4?1:$,s=w.slice($),$+=t[1].length);let S=!1;if(!w&&/^ *$/.test(p)&&(r+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const h=new RegExp(`^ {0,${Math.min(3,$-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,$-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),V=new RegExp(`^ {0,${Math.min(3,$-1)}}(?:\`\`\`|~~~)`),M=new RegExp(`^ {0,${Math.min(3,$-1)}}#`);for(;e;){const A=e.split(`
`,1)[0];if(p=A,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),V.test(p)||M.test(p)||h.test(p)||y.test(e))break;if(p.search(/[^ ]/)>=$||!p.trim())s+=`
`+p.slice($);else{if(S||w.search(/[^ ]/)>=4||V.test(w)||M.test(w)||y.test(w))break;s+=`
`+p}!S&&!p.trim()&&(S=!0),r+=A+`
`,e=e.substring(A.length+1),w=p.slice($)}}a.loose||(d?a.loose=!0:/\n *\n *$/.test(r)&&(d=!0));let _=null,b;this.options.gfm&&(_=/^\[[ xX]\] /.exec(s),_&&(b=_[0]!=="[ ] ",s=s.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:r,task:!!_,checked:b,loose:!1,text:s,tokens:[]}),a.raw+=r}a.items[a.items.length-1].raw=r.trimEnd(),a.items[a.items.length-1].text=s.trimEnd(),a.raw=a.raw.trimEnd();for(let c=0;c<a.items.length;c++)if(this.lexer.state.top=!1,a.items[c].tokens=this.lexer.blockTokens(a.items[c].text,[]),!a.loose){const w=a.items[c].tokens.filter($=>$.type==="space"),p=w.length>0&&w.some($=>/\n.*\n/.test($.raw));a.loose=p}if(a.loose)for(let c=0;c<a.items.length;c++)a.items[c].loose=!0;return a}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const l=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:l,raw:t[0],href:i,title:a}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const l=On(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),a=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(l.length===i.length){for(const r of i)/^ *-+: *$/.test(r)?o.align.push("right"):/^ *:-+: *$/.test(r)?o.align.push("center"):/^ *:-+ *$/.test(r)?o.align.push("left"):o.align.push(null);for(const r of l)o.header.push({text:r,tokens:this.lexer.inline(r)});for(const r of a)o.rows.push(On(r,o.header.length).map(s=>({text:s,tokens:this.lexer.inline(s)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const l=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:l,tokens:this.lexer.inline(l)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:pe(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const l=t[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;const o=It(l.slice(0,-1),"\\");if((l.length-o.length)%2===0)return}else{const o=po(t[2],"()");if(o>-1){const s=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let i=t[2],a="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],a=o[3])}else a=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(l)?i=i.slice(1):i=i.slice(1,-1)),Pn(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let l;if((l=this.rules.inline.reflink.exec(e))||(l=this.rules.inline.nolink.exec(e))){const i=(l[2]||l[1]).replace(/\s+/g," "),a=t[i.toLowerCase()];if(!a){const o=l[0].charAt(0);return{type:"text",raw:o,text:o}}return Pn(l,a,l[0],this.lexer)}}emStrong(e,t,l=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&l.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!l||this.rules.inline.punctuation.exec(l)){const o=[...i[0]].length-1;let r,s,d=o,c=0;const w=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(w.lastIndex=0,t=t.slice(-1*e.length+o);(i=w.exec(t))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(s=[...r].length,i[3]||i[4]){d+=s;continue}else if((i[5]||i[6])&&o%3&&!((o+s)%3)){c+=s;continue}if(d-=s,d>0)continue;s=Math.min(s,s+d+c);const p=[...i[0]][0].length,$=e.slice(0,o+i.index+p+s);if(Math.min(o,s)%2){const _=$.slice(1,-1);return{type:"em",raw:$,text:_,tokens:this.lexer.inlineTokens(_)}}const S=$.slice(2,-2);return{type:"strong",raw:$,text:S,tokens:this.lexer.inlineTokens(S)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let l=t[2].replace(/\n/g," ");const i=/[^ ]/.test(l),a=/^ /.test(l)&&/ $/.test(l);return i&&a&&(l=l.substring(1,l.length-1)),l=pe(l,!0),{type:"codespan",raw:t[0],text:l}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let l,i;return t[2]==="@"?(l=pe(t[1]),i="mailto:"+l):(l=pe(t[1]),i=l),{type:"link",raw:t[0],text:l,href:i,tokens:[{type:"text",raw:l,text:l}]}}}url(e){var l;let t;if(t=this.rules.inline.url.exec(e)){let i,a;if(t[2]==="@")i=pe(t[0]),a="mailto:"+i;else{let o;do o=t[0],t[0]=((l=this.rules.inline._backpedal.exec(t[0]))==null?void 0:l[0])??"";while(o!==t[0]);i=pe(t[0]),t[1]==="www."?a="http://"+t[0]:a=t[0]}return{type:"link",raw:t[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let l;return this.lexer.state.inRawBlock?l=t[0]:l=pe(t[0]),{type:"text",raw:t[0],text:l}}}}const mo=/^(?: *(?:\n|$))+/,vo=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,go=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ft=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,na=/(?:[*+-]|\d{1,9}[.)])/,la=X(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,na).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),vn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ko=/^[^\n]+/,gn=/(?!\s*\])(?:\\.|[^\[\]\\])+/,yo=X(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",gn).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),wo=X(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,na).getRegex(),Vt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",fn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,bo=X("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",fn).replace("tag",Vt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),aa=X(vn).replace("hr",ft).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vt).getRegex(),$o=X(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",aa).getRegex(),kn={blockquote:$o,code:vo,def:yo,fences:go,heading:fo,hr:ft,html:bo,lheading:la,list:wo,newline:mo,paragraph:aa,table:ct,text:ko},Nn=X("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ft).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vt).getRegex(),_o={...kn,table:Nn,paragraph:X(vn).replace("hr",ft).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Nn).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vt).getRegex()},xo={...kn,html:X(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",fn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ct,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:X(vn).replace("hr",ft).replace("heading",` *#{1,6} *[^
]`).replace("lheading",la).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ia=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Co=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,oa=/^( {2,}|\\)\n(?!\s*$)/,Lo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,kt="\\p{P}\\p{S}",Io=X(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,kt).getRegex(),Ro=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Eo=X(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,kt).getRegex(),Ao=X("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,kt).getRegex(),zo=X("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,kt).getRegex(),So=X(/\\([punct])/,"gu").replace(/punct/g,kt).getRegex(),To=X(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jo=X(fn).replace("(?:-->|$)","-->").getRegex(),Mo=X("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),St=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Uo=X(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",St).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ra=X(/^!?\[(label)\]\[(ref)\]/).replace("label",St).replace("ref",gn).getRegex(),sa=X(/^!?\[(ref)\](?:\[\])?/).replace("ref",gn).getRegex(),Vo=X("reflink|nolink(?!\\()","g").replace("reflink",ra).replace("nolink",sa).getRegex(),yn={_backpedal:ct,anyPunctuation:So,autolink:To,blockSkip:Ro,br:oa,code:Co,del:ct,emStrongLDelim:Eo,emStrongRDelimAst:Ao,emStrongRDelimUnd:zo,escape:ia,link:Uo,nolink:sa,punctuation:Io,reflink:ra,reflinkSearch:Vo,tag:Mo,text:Lo,url:ct},Ho={...yn,link:X(/^!?\[(label)\]\((.*?)\)/).replace("label",St).getRegex(),reflink:X(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",St).getRegex()},en={...yn,escape:X(ia).replace("])","~|])").getRegex(),url:X(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Oo={...en,br:X(oa).replace("{2,}","*").getRegex(),text:X(en.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Rt={normal:kn,gfm:_o,pedantic:xo},it={normal:yn,gfm:en,breaks:Oo,pedantic:Ho};class ke{constructor(e){te(this,"tokens");te(this,"options");te(this,"state");te(this,"tokenizer");te(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ve,this.options.tokenizer=this.options.tokenizer||new zt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Rt.normal,inline:it.normal};this.options.pedantic?(t.block=Rt.pedantic,t.inline=it.pedantic):this.options.gfm&&(t.block=Rt.gfm,this.options.breaks?t.inline=it.breaks:t.inline=it.gfm),this.tokenizer.rules=t}static get rules(){return{block:Rt,inline:it}}static lex(e,t){return new ke(t).lex(e)}static lexInline(e,t){return new ke(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const l=this.inlineQueue[t];this.inlineTokens(l.src,l.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(r,s,d)=>s+"    ".repeat(d.length));let l,i,a,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(r=>(l=r.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))){if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length),l.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+l.raw,i.text+=`
`+l.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+l.raw,i.text+=`
`+l.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let r=1/0;const s=e.slice(1);let d;this.options.extensions.startBlock.forEach(c=>{d=c.call({lexer:this},s),typeof d=="number"&&d>=0&&(r=Math.min(r,d))}),r<1/0&&r>=0&&(a=e.substring(0,r+1))}if(this.state.top&&(l=this.tokenizer.paragraph(a))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+l.raw,i.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(l),o=a.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+l.raw,i.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(l);continue}if(e){const r="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let l,i,a,o=e,r,s,d;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)c.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,r.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(s||(d=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(l=c.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))){if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),i=t[t.length-1],i&&l.type==="text"&&i.type==="text"?(i.raw+=l.raw,i.text+=l.text):t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length),i=t[t.length-1],i&&l.type==="text"&&i.type==="text"?(i.raw+=l.raw,i.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,o,d)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const w=e.slice(1);let p;this.options.extensions.startInline.forEach($=>{p=$.call({lexer:this},w),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(a=e.substring(0,c+1))}if(l=this.tokenizer.inlineText(a)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(d=l.raw.slice(-1)),s=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=l.raw,i.text+=l.text):t.push(l);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}}class Tt{constructor(e){te(this,"options");this.options=e||Ve}code(e,t,l){var a;const i=(a=(t||"").match(/^\S*/))==null?void 0:a[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+pe(i)+'">'+(l?e:pe(e,!0))+`</code></pre>
`:"<pre><code>"+(l?e:pe(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,l){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,l){const i=t?"ol":"ul",a=t&&l!==1?' start="'+l+'"':"";return"<"+i+a+`>
`+e+"</"+i+`>
`}listitem(e,t,l){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const l=t.header?"th":"td";return(t.align?`<${l} align="${t.align}">`:`<${l}>`)+e+`</${l}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,l){const i=Hn(e);if(i===null)return l;e=i;let a='<a href="'+e+'"';return t&&(a+=' title="'+t+'"'),a+=">"+l+"</a>",a}image(e,t,l){const i=Hn(e);if(i===null)return l;e=i;let a=`<img src="${e}" alt="${l}"`;return t&&(a+=` title="${t}"`),a+=">",a}text(e){return e}}class wn{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,l){return""+l}image(e,t,l){return""+l}br(){return""}}class ye{constructor(e){te(this,"options");te(this,"renderer");te(this,"textRenderer");this.options=e||Ve,this.options.renderer=this.options.renderer||new Tt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new wn}static parse(e,t){return new ye(t).parse(e)}static parseInline(e,t){return new ye(t).parseInline(e)}parse(e,t=!0){let l="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=a,r=this.options.extensions.renderers[o.type].call({parser:this},o);if(r!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){l+=r||"";continue}}switch(a.type){case"space":continue;case"hr":{l+=this.renderer.hr();continue}case"heading":{const o=a;l+=this.renderer.heading(this.parseInline(o.tokens),o.depth,co(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=a;l+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=a;let r="",s="";for(let c=0;c<o.header.length;c++)s+=this.renderer.tablecell(this.parseInline(o.header[c].tokens),{header:!0,align:o.align[c]});r+=this.renderer.tablerow(s);let d="";for(let c=0;c<o.rows.length;c++){const w=o.rows[c];s="";for(let p=0;p<w.length;p++)s+=this.renderer.tablecell(this.parseInline(w[p].tokens),{header:!1,align:o.align[p]});d+=this.renderer.tablerow(s)}l+=this.renderer.table(r,d);continue}case"blockquote":{const o=a,r=this.parse(o.tokens);l+=this.renderer.blockquote(r);continue}case"list":{const o=a,r=o.ordered,s=o.start,d=o.loose;let c="";for(let w=0;w<o.items.length;w++){const p=o.items[w],$=p.checked,S=p.task;let _="";if(p.task){const b=this.renderer.checkbox(!!$);d?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=b+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=b+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:b+" "}):_+=b+" "}_+=this.parse(p.tokens,d),c+=this.renderer.listitem(_,S,!!$)}l+=this.renderer.list(c,r,s);continue}case"html":{const o=a;l+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=a;l+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=a,r=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],r+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);l+=t?this.renderer.paragraph(r):r;continue}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return l}parseInline(e,t){t=t||this.renderer;let l="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){l+=o||"";continue}}switch(a.type){case"escape":{const o=a;l+=t.text(o.text);break}case"html":{const o=a;l+=t.html(o.text);break}case"link":{const o=a;l+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=a;l+=t.image(o.href,o.title,o.text);break}case"strong":{const o=a;l+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=a;l+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=a;l+=t.codespan(o.text);break}case"br":{l+=t.br();break}case"del":{const o=a;l+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=a;l+=t.text(o.text);break}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return l}}class ut{constructor(e){te(this,"options");this.options=e||Ve}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}te(ut,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var gt,tn,Ut,ca;class bn{constructor(...e){Wt(this,gt);Wt(this,Ut);te(this,"defaults",mn());te(this,"options",this.setOptions);te(this,"parse",xt(this,gt,tn).call(this,ke.lex,ye.parse));te(this,"parseInline",xt(this,gt,tn).call(this,ke.lexInline,ye.parseInline));te(this,"Parser",ye);te(this,"Renderer",Tt);te(this,"TextRenderer",wn);te(this,"Lexer",ke);te(this,"Tokenizer",zt);te(this,"Hooks",ut);this.use(...e)}walkTokens(e,t){var i,a;let l=[];for(const o of e)switch(l=l.concat(t.call(this,o)),o.type){case"table":{const r=o;for(const s of r.header)l=l.concat(this.walkTokens(s.tokens,t));for(const s of r.rows)for(const d of s)l=l.concat(this.walkTokens(d.tokens,t));break}case"list":{const r=o;l=l.concat(this.walkTokens(r.items,t));break}default:{const r=o;(a=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&a[r.type]?this.defaults.extensions.childTokens[r.type].forEach(s=>{const d=r[s].flat(1/0);l=l.concat(this.walkTokens(d,t))}):r.tokens&&(l=l.concat(this.walkTokens(r.tokens,t)))}}return l}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(l=>{const i={...l};if(i.async=this.defaults.async||i.async||!1,l.extensions&&(l.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const o=t.renderers[a.name];o?t.renderers[a.name]=function(...r){let s=a.renderer.apply(this,r);return s===!1&&(s=o.apply(this,r)),s}:t.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[a.level];o?o.unshift(a.tokenizer):t[a.level]=[a.tokenizer],a.start&&(a.level==="block"?t.startBlock?t.startBlock.push(a.start):t.startBlock=[a.start]:a.level==="inline"&&(t.startInline?t.startInline.push(a.start):t.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(t.childTokens[a.name]=a.childTokens)}),i.extensions=t),l.renderer){const a=this.defaults.renderer||new Tt(this.defaults);for(const o in l.renderer){if(!(o in a))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const r=o,s=l.renderer[r],d=a[r];a[r]=(...c)=>{let w=s.apply(a,c);return w===!1&&(w=d.apply(a,c)),w||""}}i.renderer=a}if(l.tokenizer){const a=this.defaults.tokenizer||new zt(this.defaults);for(const o in l.tokenizer){if(!(o in a))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const r=o,s=l.tokenizer[r],d=a[r];a[r]=(...c)=>{let w=s.apply(a,c);return w===!1&&(w=d.apply(a,c)),w}}i.tokenizer=a}if(l.hooks){const a=this.defaults.hooks||new ut;for(const o in l.hooks){if(!(o in a))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const r=o,s=l.hooks[r],d=a[r];ut.passThroughHooks.has(o)?a[r]=c=>{if(this.defaults.async)return Promise.resolve(s.call(a,c)).then(p=>d.call(a,p));const w=s.call(a,c);return d.call(a,w)}:a[r]=(...c)=>{let w=s.apply(a,c);return w===!1&&(w=d.apply(a,c)),w}}i.hooks=a}if(l.walkTokens){const a=this.defaults.walkTokens,o=l.walkTokens;i.walkTokens=function(r){let s=[];return s.push(o.call(this,r)),a&&(s=s.concat(a.call(this,r))),s}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ke.lex(e,t??this.defaults)}parser(e,t){return ye.parse(e,t??this.defaults)}}gt=new WeakSet,tn=function(e,t){return(l,i)=>{const a={...i},o={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const r=xt(this,Ut,ca).call(this,!!o.silent,!!o.async);if(typeof l>"u"||l===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof l!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(l)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(l):l).then(s=>e(s,o)).then(s=>o.hooks?o.hooks.processAllTokens(s):s).then(s=>o.walkTokens?Promise.all(this.walkTokens(s,o.walkTokens)).then(()=>s):s).then(s=>t(s,o)).then(s=>o.hooks?o.hooks.postprocess(s):s).catch(r);try{o.hooks&&(l=o.hooks.preprocess(l));let s=e(l,o);o.hooks&&(s=o.hooks.processAllTokens(s)),o.walkTokens&&this.walkTokens(s,o.walkTokens);let d=t(s,o);return o.hooks&&(d=o.hooks.postprocess(d)),d}catch(s){return r(s)}}},Ut=new WeakSet,ca=function(e,t){return l=>{if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+pe(l.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(l);throw l}};const je=new bn;function Q(n,e){return je.parse(n,e)}Q.options=Q.setOptions=function(n){return je.setOptions(n),Q.defaults=je.defaults,Jl(Q.defaults),Q};Q.getDefaults=mn;Q.defaults=Ve;Q.use=function(...n){return je.use(...n),Q.defaults=je.defaults,Jl(Q.defaults),Q};Q.walkTokens=function(n,e){return je.walkTokens(n,e)};Q.parseInline=je.parseInline;Q.Parser=ye;Q.parser=ye.parse;Q.Renderer=Tt;Q.TextRenderer=wn;Q.Lexer=ke;Q.lexer=ke.lex;Q.Tokenizer=zt;Q.Hooks=ut;Q.parse=Q;Q.options;Q.setOptions;Q.use;Q.walkTokens;Q.parseInline;ye.parse;ke.lex;function ua(n){if(typeof n=="function"&&(n={highlight:n}),!n||typeof n.highlight!="function")throw new Error("Must provide highlight function");return typeof n.langPrefix!="string"&&(n.langPrefix="language-"),{async:!!n.async,walkTokens(e){if(e.type!=="code")return;const t=Bn(e.lang);if(n.async)return Promise.resolve(n.highlight(e.text,t,e.lang||"")).then(Dn(e));const l=n.highlight(e.text,t,e.lang||"");if(l instanceof Promise)throw new Error("markedHighlight is not set to async but the highlight function is async. Set the async option to true on markedHighlight to await the async highlight function.");Dn(e)(l)},renderer:{code(e,t,l){const i=Bn(t),a=i?` class="${n.langPrefix}${Wn(i)}"`:"";return e=e.replace(/\n$/,""),`<pre><code${a}>${l?e:Wn(e,!0)}
</code></pre>`}}}}function Bn(n){return(n||"").match(/\S*/)[0]}function Dn(n){return e=>{typeof e=="string"&&e!==n.text&&(n.escaped=!0,n.text=e)}}const da=/[&<>"']/,Po=new RegExp(da.source,"g"),pa=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,No=new RegExp(pa.source,"g"),Bo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fn=n=>Bo[n];function Wn(n,e){if(e){if(da.test(n))return n.replace(Po,Fn)}else if(pa.test(n))return n.replace(No,Fn);return n}var $n={},Pe={},yt={},Do=Et&&Et.__awaiter||function(n,e,t,l){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function r(c){try{d(l.next(c))}catch(w){o(w)}}function s(c){try{d(l.throw(c))}catch(w){o(w)}}function d(c){c.done?a(c.value):i(c.value).then(r,s)}d((l=l.apply(n,e||[])).next())})},Fo=Et&&Et.__generator||function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},l,i,a,o;return o={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function r(d){return function(c){return s([d,c])}}function s(d){if(l)throw new TypeError("Generator is already executing.");for(;t;)try{if(l=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(c){d=[6,c],i=0}finally{l=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(yt,"__esModule",{value:!0});yt.ReCaptchaInstance=void 0;var Wo=function(){function n(e,t,l){this.siteKey=e,this.recaptchaID=t,this.recaptcha=l,this.styleContainer=null}return n.prototype.execute=function(e){return Do(this,void 0,void 0,function(){return Fo(this,function(t){return[2,this.recaptcha.enterprise?this.recaptcha.enterprise.execute(this.recaptchaID,{action:e}):this.recaptcha.execute(this.recaptchaID,{action:e})]})})},n.prototype.getSiteKey=function(){return this.siteKey},n.prototype.hideBadge=function(){this.styleContainer===null&&(this.styleContainer=document.createElement("style"),this.styleContainer.innerHTML=".grecaptcha-badge{visibility:hidden !important;}",document.head.appendChild(this.styleContainer))},n.prototype.showBadge=function(){this.styleContainer!==null&&(document.head.removeChild(this.styleContainer),this.styleContainer=null)},n}();yt.ReCaptchaInstance=Wo;Object.defineProperty(Pe,"__esModule",{value:!0});Pe.getInstance=Pe.load=void 0;var qo=yt,xe;(function(n){n[n.NOT_LOADED=0]="NOT_LOADED",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED"})(xe||(xe={}));var ha=function(){function n(){}return n.load=function(e,t){if(t===void 0&&(t={}),typeof document>"u")return Promise.reject(new Error("This is a library for the browser!"));if(n.getLoadingState()===xe.LOADED)return n.instance.getSiteKey()===e?Promise.resolve(n.instance):Promise.reject(new Error("reCAPTCHA already loaded with different site key!"));if(n.getLoadingState()===xe.LOADING)return e!==n.instanceSiteKey?Promise.reject(new Error("reCAPTCHA already loaded with different site key!")):new Promise(function(i,a){n.successfulLoadingConsumers.push(function(o){return i(o)}),n.errorLoadingRunnable.push(function(o){return a(o)})});n.instanceSiteKey=e,n.setLoadingState(xe.LOADING);var l=new n;return new Promise(function(i,a){l.loadScript(e,t.useRecaptchaNet||!1,t.useEnterprise||!1,t.renderParameters?t.renderParameters:{},t.customUrl).then(function(){n.setLoadingState(xe.LOADED);var o=l.doExplicitRender(grecaptcha,e,t.explicitRenderParameters?t.explicitRenderParameters:{},t.useEnterprise||!1),r=new qo.ReCaptchaInstance(e,o,grecaptcha);n.successfulLoadingConsumers.forEach(function(s){return s(r)}),n.successfulLoadingConsumers=[],t.autoHideBadge&&r.hideBadge(),n.instance=r,i(r)}).catch(function(o){n.errorLoadingRunnable.forEach(function(r){return r(o)}),n.errorLoadingRunnable=[],a(o)})})},n.getInstance=function(){return n.instance},n.setLoadingState=function(e){n.loadingState=e},n.getLoadingState=function(){return n.loadingState===null?xe.NOT_LOADED:n.loadingState},n.prototype.loadScript=function(e,t,l,i,a){var o=this;t===void 0&&(t=!1),l===void 0&&(l=!1),i===void 0&&(i={}),a===void 0&&(a="");var r=document.createElement("script");r.setAttribute("recaptcha-v3-script","");var s="https://www.google.com/recaptcha/api.js";t&&(l?s="https://recaptcha.net/recaptcha/enterprise.js":s="https://recaptcha.net/recaptcha/api.js"),l&&(s="https://www.google.com/recaptcha/enterprise.js"),a&&(s=a),i.render&&(i.render=void 0);var d=this.buildQueryString(i);return r.src=s+"?render=explicit"+d,new Promise(function(c,w){r.addEventListener("load",o.waitForScriptToLoad(function(){c(r)},l),!1),r.onerror=function(p){n.setLoadingState(xe.NOT_LOADED),w(p)},document.head.appendChild(r)})},n.prototype.buildQueryString=function(e){var t=Object.keys(e);return t.length<1?"":"&"+Object.keys(e).filter(function(l){return!!e[l]}).map(function(l){return l+"="+e[l]}).join("&")},n.prototype.waitForScriptToLoad=function(e,t){var l=this;return function(){window.grecaptcha===void 0?setTimeout(function(){l.waitForScriptToLoad(e,t)},n.SCRIPT_LOAD_DELAY):t?window.grecaptcha.enterprise.ready(function(){e()}):window.grecaptcha.ready(function(){e()})}},n.prototype.doExplicitRender=function(e,t,l,i){var a={sitekey:t,badge:l.badge,size:l.size,tabindex:l.tabindex};return l.container?i?e.enterprise.render(l.container,a):e.render(l.container,a):i?e.enterprise.render(a):e.render(a)},n.loadingState=null,n.instance=null,n.instanceSiteKey=null,n.successfulLoadingConsumers=[],n.errorLoadingRunnable=[],n.SCRIPT_LOAD_DELAY=25,n}();Pe.load=ha.load;Pe.getInstance=ha.getInstance;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ReCaptchaInstance=n.getInstance=n.load=void 0;var e=Pe;Object.defineProperty(n,"load",{enumerable:!0,get:function(){return e.load}}),Object.defineProperty(n,"getInstance",{enumerable:!0,get:function(){return e.getInstance}});var t=yt;Object.defineProperty(n,"ReCaptchaInstance",{enumerable:!0,get:function(){return t.ReCaptchaInstance}})})($n);const qn=({size:n})=>T("svg",{class:"wl-close-icon",viewBox:"0 0 1024 1024",width:n,height:n},[T("path",{d:"M697.173 85.333h-369.92c-144.64 0-241.92 101.547-241.92 252.587v348.587c0 150.613 97.28 252.16 241.92 252.16h369.92c144.64 0 241.494-101.547 241.494-252.16V337.92c0-151.04-96.854-252.587-241.494-252.587z",fill:"currentColor"}),T("path",{d:"m640.683 587.52-75.947-75.861 75.904-75.862a37.29 37.29 0 0 0 0-52.778 37.205 37.205 0 0 0-52.779 0l-75.946 75.818-75.862-75.946a37.419 37.419 0 0 0-52.821 0 37.419 37.419 0 0 0 0 52.821l75.947 75.947-75.776 75.733a37.29 37.29 0 1 0 52.778 52.821l75.776-75.776 75.947 75.947a37.376 37.376 0 0 0 52.779-52.821z",fill:"#888"})]),Go=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"m341.013 394.667 27.755 393.45h271.83l27.733-393.45h64.106l-28.01 397.952a64 64 0 0 1-63.83 59.498H368.768a64 64 0 0 1-63.83-59.52l-28.053-397.93h64.128zm139.307 19.818v298.667h-64V414.485h64zm117.013 0v298.667h-64V414.485h64zM181.333 288h640v64h-640v-64zm453.483-106.667v64h-256v-64h256z",fill:"red"})),Zo=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z",fill:"currentColor"})),Yo=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[T("path",{d:"M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z",fill:"currentColor"}),T("path",{d:"M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z",fill:"currentColor"})]),Ko=({active:n=!1})=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[T("path",{d:`M850.654 323.804c-11.042-25.625-26.862-48.532-46.885-68.225-20.022-19.61-43.258-34.936-69.213-45.73-26.78-11.124-55.124-16.727-84.375-16.727-40.622 0-80.256 11.123-114.698 32.135A214.79 214.79 0 0 0 512 241.819a214.79 214.79 0 0 0-23.483-16.562c-34.442-21.012-74.076-32.135-114.698-32.135-29.25 0-57.595 5.603-84.375 16.727-25.872 10.711-49.19 26.12-69.213 45.73-20.105 19.693-35.843 42.6-46.885 68.225-11.453 26.615-17.303 54.877-17.303 83.963 0 27.439 5.603 56.03 16.727 85.117 9.31 24.307 22.659 49.52 39.715 74.981 27.027 40.293 64.188 82.316 110.33 124.915 76.465 70.615 152.189 119.394 155.402 121.371l19.528 12.525c8.652 5.52 19.776 5.52 28.427 0l19.529-12.525c3.213-2.06 78.854-50.756 155.401-121.371 46.143-42.6 83.304-84.622 110.33-124.915 17.057-25.46 30.487-50.674 39.716-74.981 11.124-29.087 16.727-57.678 16.727-85.117.082-29.086-5.768-57.348-17.221-83.963z${n?"":"M512 761.5S218.665 573.55 218.665 407.767c0-83.963 69.461-152.023 155.154-152.023 60.233 0 112.473 33.618 138.181 82.727 25.708-49.109 77.948-82.727 138.18-82.727 85.694 0 155.155 68.06 155.155 152.023C805.335 573.551 512 761.5 512 761.5z"}`,fill:n?"red":"currentColor"})]),Qo=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[T("path",{d:"M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0",fill:"currentColor"}),T("path",{d:"M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0",fill:"currentColor"})]),Xo=()=>T("svg",{width:"16",height:"16",ariaHidden:"true"},T("path",{d:"M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z",fill:"currentColor"})),Jo=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"M810.667 213.333a64 64 0 0 1 64 64V704a64 64 0 0 1-64 64H478.336l-146.645 96.107a21.333 21.333 0 0 1-33.024-17.856V768h-85.334a64 64 0 0 1-64-64V277.333a64 64 0 0 1 64-64h597.334zm0 64H213.333V704h149.334v63.296L459.243 704h351.424V277.333zm-271.36 213.334v64h-176.64v-64h176.64zm122.026-128v64H362.667v-64h298.666z",fill:"currentColor"})),er=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"M813.039 318.772L480.53 651.278H360.718V531.463L693.227 198.961C697.904 194.284 704.027 192 710.157 192C716.302 192 722.436 194.284 727.114 198.961L813.039 284.88C817.72 289.561 820 295.684 820 301.825C820 307.95 817.72 314.093 813.039 318.772ZM710.172 261.888L420.624 551.431V591.376H460.561L750.109 301.825L710.172 261.888ZM490.517 291.845H240.906V771.09H720.156V521.479C720.156 504.947 733.559 491.529 750.109 491.529C766.653 491.529 780.063 504.947 780.063 521.479V791.059C780.063 813.118 762.18 831 740.125 831H220.937C198.882 831 181 813.118 181 791.059V271.872C181 249.817 198.882 231.935 220.937 231.935H490.517C507.06 231.935 520.47 245.352 520.47 261.888C520.47 278.424 507.06 291.845 490.517 291.845Z",fill:"currentColor"})),tr=()=>T("svg",{class:"verified-icon",viewBox:"0 0 1024 1024",width:"14",height:"14"},T("path",{d:"m894.4 461.56-54.4-63.2c-10.4-12-18.8-34.4-18.8-50.4v-68c0-42.4-34.8-77.2-77.2-77.2h-68c-15.6 0-38.4-8.4-50.4-18.8l-63.2-54.4c-27.6-23.6-72.8-23.6-100.8 0l-62.8 54.8c-12 10-34.8 18.4-50.4 18.4h-69.2c-42.4 0-77.2 34.8-77.2 77.2v68.4c0 15.6-8.4 38-18.4 50l-54 63.6c-23.2 27.6-23.2 72.4 0 100l54 63.6c10 12 18.4 34.4 18.4 50v68.4c0 42.4 34.8 77.2 77.2 77.2h69.2c15.6 0 38.4 8.4 50.4 18.8l63.2 54.4c27.6 23.6 72.8 23.6 100.8 0l63.2-54.4c12-10.4 34.4-18.8 50.4-18.8h68c42.4 0 77.2-34.8 77.2-77.2v-68c0-15.6 8.4-38.4 18.8-50.4l54.4-63.2c23.2-27.6 23.2-73.2-.4-100.8zm-216-25.2-193.2 193.2a30 30 0 0 1-42.4 0l-96.8-96.8a30.16 30.16 0 0 1 0-42.4c11.6-11.6 30.8-11.6 42.4 0l75.6 75.6 172-172c11.6-11.6 30.8-11.6 42.4 0 11.6 11.6 11.6 30.8 0 42.4z",fill:"#27ae60"})),ht=({size:n=100})=>T("svg",{width:n,height:n,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},T("circle",{cx:50,cy:50,fill:"none",stroke:"currentColor",strokeWidth:"4",r:"40","stroke-dasharray":"85 30"},T("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;360 50 50",keyTimes:"0;1"}))),nr=()=>T("svg",{width:24,height:24,fill:"currentcolor",viewBox:"0 0 24 24"},[T("path",{style:"transform: translateY(0.5px)",d:"M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"}),T("path",{d:"M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"})]),lr=()=>he("WALINE_USER_META",{nick:"",mail:"",link:""}),ar=()=>he("WALINE_COMMENT_BOX_EDITOR",""),ir="WALINE_LIKE";let Gn=null;const ma=()=>Gn||(Gn=he(ir,[])),or="WALINE_REACTION";let Zn=null;const rr=()=>Zn??(Zn=he(or,{})),Yn={},sr=n=>{const e=Yn[n]??(Yn[n]=$n.load(n,{useRecaptchaNet:!0,autoHideBadge:!0}));return{execute:t=>e.then(l=>l.execute(t))}},cr=n=>({execute:async e=>{const{load:t}=Bl("https://challenges.cloudflare.com/turnstile/v0/api.js",void 0,{async:!1});await t();const l=window==null?void 0:window.turnstile;return new Promise(i=>{l==null||l.ready(()=>{l==null||l.render(".wl-captcha-container",{sitekey:n,action:e,size:"compact",callback:i})})})}}),ur="WALINE_USER";let Kn=null;const _n=()=>Kn??(Kn=he(ur,{})),dr={key:0,class:"wl-reaction"},pr=["textContent"],hr={class:"wl-reaction-list"},mr=["onClick"],vr={class:"wl-reaction-img"},gr=["src","alt"],fr=["textContent"],kr=["textContent"];var yr=ne({__name:"ArticleReaction",setup(n,{expose:e}){e();const t=rr(),l=Fe("config"),i=E(-1),a=E([]),o=N(()=>l.value.locale),r=N(()=>l.value.reaction.length>0),s=N(()=>{const{reaction:p,path:$}=l.value;return p.map((S,_)=>({icon:S,desc:o.value[`reaction${_}`],active:t.value[$]===_}))});let d;const c=async()=>{if(!r.value)return;const{serverURL:p,lang:$,path:S,reaction:_}=l.value,b=new AbortController;d=b.abort.bind(b);const h=await hn({serverURL:p,lang:$,paths:[S],type:_.map((y,V)=>`reaction${V}`),signal:b.signal});a.value=_.map((y,V)=>h[0][`reaction${V}`])},w=async p=>{if(i.value===-1){const{serverURL:$,lang:S,path:_}=l.value,b=t.value[_];i.value=p,b!==void 0&&(await pt({serverURL:$,lang:S,path:_,type:`reaction${b}`,action:"desc"}),a.value[b]=Math.max(a.value[b]-1,0)),b!==p&&(await pt({serverURL:$,lang:S,path:_,type:`reaction${p}`}),a.value[p]=(a.value[p]||0)+1),b===p?delete t.value[_]:t.value[_]=p,i.value=-1}};return ve(()=>{se(()=>[l.value.serverURL,l.value.path],()=>{c()},{immediate:!0})}),We(()=>d==null?void 0:d()),(p,$)=>s.value.length?(u(),v("div",dr,[m("div",{class:"wl-reaction-title",textContent:z(o.value.reactionTitle)},null,8,pr),m("ul",hr,[(u(!0),v(F,null,J(s.value,({active:S,icon:_,desc:b},h)=>(u(),v("li",{key:h,class:B(["wl-reaction-item",{active:S}]),onClick:y=>w(h)},[m("div",vr,[m("img",{src:_,alt:b},null,8,gr),i.value===h?(u(),K(k(ht),{key:0,class:"wl-reaction-loading"})):(u(),v("div",{key:1,class:"wl-reaction-votes",textContent:z(a.value[h]||0)},null,8,fr))]),m("div",{class:"wl-reaction-text",textContent:z(b)},null,8,kr)],10,mr))),128))])])):I("v-if",!0)}}),wt=(n,e)=>{const t=n.__vccOpts||n;for(const[l,i]of e)t[l]=i;return t},wr=wt(yr,[["__file","ArticleReaction.vue"]]);const br=["data-index"],$r=["src","title","onClick"];var _r=ne({__name:"ImageWall",props:{items:{default:()=>[]},columnWidth:{default:300},gap:{default:0}},emits:["insert"],setup(n,{expose:e}){const t=n;e();let l=null;const i=E(null),a=E({}),o=E([]),r=()=>{const p=Math.floor((i.value.getBoundingClientRect().width+t.gap)/(t.columnWidth+t.gap));return p>0?p:1},s=p=>new Array(p).fill(null).map(()=>[]),d=async p=>{var $;if(p>=t.items.length)return;await pn();const S=Array.from((($=i.value)==null?void 0:$.children)||[]).reduce((_,b)=>b.getBoundingClientRect().height<_.getBoundingClientRect().height?b:_);o.value[Number(S.dataset.index)].push(p),await d(p+1)},c=async(p=!1)=>{if(o.value.length===r()&&!p)return;o.value=s(r());const $=window.scrollY;await d(0),window.scrollTo({top:$})},w=p=>{a.value[p.target.src]=!0};return ve(()=>{c(!0),l=new ResizeObserver(()=>{c()}),l.observe(i.value),se(()=>[t.items],()=>{a.value={},c(!0)}),se(()=>[t.columnWidth,t.gap],()=>{c()})}),Tl(()=>l.unobserve(i.value)),(p,$)=>(u(),v("div",{ref_key:"wall",ref:i,class:"wl-gallery",style:dt({gap:`${p.gap}px`})},[(u(!0),v(F,null,J(o.value,(S,_)=>(u(),v("div",{key:_,class:"wl-gallery-column","data-index":_,style:dt({gap:`${p.gap}px`})},[(u(!0),v(F,null,J(S,b=>(u(),v(F,{key:b},[a.value[p.items[b].src]?I("v-if",!0):(u(),K(k(ht),{key:0,size:36,style:{margin:"20px auto"}})),m("img",{class:"wl-gallery-item",src:p.items[b].src,title:p.items[b].title,loading:"lazy",onLoad:w,onClick:h=>p.$emit("insert",`![](${p.items[b].src})`)},null,40,$r)],64))),128))],12,br))),128))],4))}}),xr=wt(_r,[["__file","ImageWall.vue"]]);const Cr=n=>{try{n=decodeURI(n)}catch{}return n},va=(n="")=>n.replace(/\/$/u,""),ga=n=>/^(https?:)?\/\//.test(n),Lr=["nick","mail","link"],Qn=n=>n.filter(e=>Lr.includes(e)),Xn=["//unpkg.com/@waline/emojis@1.1.0/weibo"],Ir=["//unpkg.com/@waline/emojis/tieba/tieba_agree.png","//unpkg.com/@waline/emojis/tieba/tieba_look_down.png","//unpkg.com/@waline/emojis/tieba/tieba_sunglasses.png","//unpkg.com/@waline/emojis/tieba/tieba_pick_nose.png","//unpkg.com/@waline/emojis/tieba/tieba_awkward.png","//unpkg.com/@waline/emojis/tieba/tieba_sleep.png"],Rr=n=>new Promise((e,t)=>{if(n.size>128*1e3)return t(new Error("File too large! File size limit 128KB"));const l=new FileReader;l.readAsDataURL(n),l.onload=()=>{var i;return e(((i=l.result)==null?void 0:i.toString())||"")},l.onerror=t}),Er=n=>n===!0?'<p class="wl-tex">TeX is not available in preview</p>':'<span class="wl-tex">TeX is not available in preview</span>',Ar=n=>{const e=async(t,l={})=>fetch(`https://api.giphy.com/v1/gifs/${t}?${new URLSearchParams({lang:n,limit:"20",rating:"g",api_key:"6CIMLkNMMOhRcXPoMCPkFy4Ybk2XUiMp",...l}).toString()}`).then(i=>i.json()).then(({data:i})=>i.map(a=>({title:a.title,src:a.images.downsized_medium.url})));return{search:t=>e("search",{q:t,offset:"0"}),default:()=>e("trending",{}),more:(t,l=0)=>e("search",{q:t,offset:l.toString()})}},zr=/[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|\w+/,Sr=/</,Tr=/(?:^|\s)\/\/(.+?)$/gm,jr=/\/\*([\S\s]*?)\*\//gm,Mr=new RegExp(`(${zr.source}|${Sr.source})|((?:${Tr.source})|(?:${jr.source}))`,"gmi"),Jn=["23AC69","91C132","F19726","E8552D","1AAB8E","E1147F","2980C1","1BA1E6","9FA0A0","F19726","E30B20","E30B20","A3338B"],qt={},Ur=n=>{let e=0;return n.replace(Mr,(t,l,i)=>{if(i)return`<span style="color: slategray">${i}</span>`;if(l==="<")return"&lt;";let a;qt[l]?a=qt[l]:(a=Jn[e],qt[l]=a);const o=`<span style="color: #${a}">${l}</span>`;return e=++e%Jn.length,o})},Vr=["nick","nickError","mail","mailError","link","optional","placeholder","sofa","submit","like","cancelLike","reply","cancelReply","comment","refresh","more","preview","emoji","uploadImage","seconds","minutes","hours","days","now","uploading","login","logout","admin","sticky","word","wordHint","anonymous","level0","level1","level2","level3","level4","level5","gif","gifSearchPlaceholder","profile","approved","waiting","spam","unsticky","oldest","latest","hottest","reactionTitle"],Re=n=>Object.fromEntries(n.map((e,t)=>[Vr[t],e]));var el=Re(["NickName","NickName cannot be less than 3 bytes.","E-Mail","Please confirm your email address.","Website","Optional","Comment here...","No comment yet.","Submit","Like","Cancel like","Reply","Cancel reply","Comments","Refresh","Load More...","Preview","Emoji","Upload Image","seconds ago","minutes ago","hours ago","days ago","just now","Uploading","Login","logout","Admin","Sticky","Words",`Please input comments between $0 and $1 words!
 Current word number: $2`,"Anonymous","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Search GIF","Profile","Approved","Waiting","Spam","Unsticky","Oldest","Latest","Hottest","What do you think?"]),tl=Re(["Pseudo","Le pseudo ne peut pas faire moins de 3 octets.","E-mail","Veuillez confirmer votre adresse e-mail.","Site Web","Optionnel","Commentez ici...","Aucun commentaire pour l'instant.","Envoyer","J'aime","Annuler le j'aime","Répondre","Annuler la réponse","Commentaires","Actualiser","Charger plus...","Aperçu","Emoji","Télécharger une image","Il y a quelques secondes","Il y a quelques minutes","Il y a quelques heures","Il y a quelques jours","À l'instant","Téléchargement en cours","Connexion","Déconnexion","Admin","Épinglé","Mots",`Veuillez saisir des commentaires entre $0 et $1 mots !
 Nombre actuel de mots : $2`,"Anonyme","Nains","Hobbits","Ents","Mages","Elfes","Maïar","GIF","Rechercher un GIF","Profil","Approuvé","En attente","Indésirable","Détacher","Le plus ancien","Dernier","Le plus populaire","Qu'en pensez-vous ?"]),nl=Re(["ニックネーム","3バイト以上のニックネームをご入力ください.","メールアドレス","メールアドレスをご確認ください.","サイト","オプション","ここにコメント","コメントしましょう~","提出する","Like","Cancel like","返信する","キャンセル","コメント","更新","さらに読み込む","プレビュー","絵文字","画像をアップロード","秒前","分前","時間前","日前","たっだ今","アップロード","ログインする","ログアウト","管理者","トップに置く","ワード",`コメントは $0 から $1 ワードの間でなければなりません!
 現在の単語番号: $2`,"匿名","うえにん","なかにん","しもおし","特にしもおし","かげ","なぬし","GIF","探す GIF","個人情報","承認済み","待っている","スパム","べたつかない","逆順","正順","人気順","どう思いますか？"]),Hr=Re(["Apelido","Apelido não pode ser menor que 3 bytes.","E-Mail","Por favor, confirme seu endereço de e-mail.","Website","Opcional","Comente aqui...","Nenhum comentário, ainda.","Enviar","Like","Cancel like","Responder","Cancelar resposta","Comentários","Refrescar","Carregar Mais...","Visualizar","Emoji","Enviar Imagem","segundos atrás","minutos atrás","horas atrás","dias atrás","agora mesmo","Enviando","Entrar","Sair","Admin","Sticky","Palavras",`Favor enviar comentário com $0 a $1 palavras!
 Número de palavras atuais: $2`,"Anônimo","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Pesquisar GIF","informação pessoal","Aprovado","Espera","Spam","Unsticky","Mais velho","Mais recentes","Mais quente","O que você acha?"]),ll=Re(["Псевдоним","Никнейм не может быть меньше 3 байт.","Эл. адрес","Пожалуйста, подтвердите адрес вашей электронной почты.","Веб-сайт","Необязательный","Комментарий здесь...","Пока нет комментариев.","Отправить","Like","Cancel like","Отвечать","Отменить ответ","Комментарии","Обновить","Загрузи больше...","Превью","эмодзи","Загрузить изображение","секунд назад","несколько минут назад","несколько часов назад","дней назад","прямо сейчас","Загрузка","Авторизоваться","Выход из системы","Админ","Липкий","Слова",`Пожалуйста, введите комментарии от $0 до $1 слов!
Номер текущего слова: $2`,"Анонимный","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Поиск GIF","Персональные данные","Одобренный","Ожидающий","Спам","Нелипкий","самый старый","последний","самый горячий","Что вы думаете?"]),al=Re(["Tên","Tên không được nhỏ hơn 3 ký tự.","E-Mail","Vui lòng xác nhập địa chỉ email của bạn.","Website","Tùy chọn","Hãy bình luận có văn hoá!","Chưa có bình luận","Gửi","Thích","Bỏ thích","Trả lời","Hủy bỏ","bình luận","Làm mới","Tải thêm...","Xem trước","Emoji","Tải lên hình ảnh","giây trước","phút trước","giờ trước","ngày trước","Vừa xong","Đang tải lên","Đăng nhập","đăng xuất","Quản trị viên","Dính","từ",`Bình luận phải có độ dài giữa $0 và $1 từ!
 Số từ hiện tại: $2`,"Vô danh","Người lùn","Người tí hon","Thần rừng","Pháp sư","Tiên tộc","Maiar","Ảnh GIF","Tìm kiếm ảnh GIF","thông tin cá nhân","Đã được phê duyệt","Đang chờ đợi","Thư rác","Không dính","lâu đời nhất","muộn nhất","nóng nhất","What do you think?"]),il=Re(["昵称","昵称不能少于3个字符","邮箱","请填写正确的邮件地址","网址","可选","欢迎评论","来发评论吧~","提交","喜欢","取消喜欢","回复","取消回复","评论","刷新","加载更多...","预览","表情","上传图片","秒前","分钟前","小时前","天前","刚刚","正在上传","登录","退出","博主","置顶","字",`评论字数应在 $0 到 $1 字之间！
当前字数：$2`,"匿名","潜水","冒泡","吐槽","活跃","话痨","传说","表情包","搜索表情包","个人资料","通过","待审核","垃圾","取消置顶","按倒序","按正序","按热度","你认为这篇文章怎么样？"]),Or=Re(["暱稱","暱稱不能少於3個字元","郵箱","請填寫正確的郵件地址","網址","可選","歡迎留言","來發留言吧~","送出","喜歡","取消喜歡","回覆","取消回覆","留言","重整","載入更多...","預覽","表情","上傳圖片","秒前","分鐘前","小時前","天前","剛剛","正在上傳","登入","登出","管理者","置頂","字",`留言字數應在 $0 到 $1 字之間！
目前字數：$2`,"匿名","潛水","冒泡","吐槽","活躍","多話","傳說","表情包","搜尋表情包","個人資料","通過","待審核","垃圾","取消置頂","最早","最新","熱門","你認為這篇文章怎麼樣？"]);const fa="en-US",nn={zh:il,"zh-cn":il,"zh-tw":Or,en:el,"en-us":el,fr:tl,"fr-fr":tl,jp:nl,"jp-jp":nl,"pt-br":Hr,ru:ll,"ru-ru":ll,vi:al,"vi-vn":al},Pr=n=>nn[n.toLowerCase()]||nn[fa],Nr=n=>Object.keys(nn).includes(n.toLowerCase())?n:fa,Br=n=>{const e=va(n);return ga(e)?e:`https://${e}`},Dr=n=>Array.isArray(n)?n:n?[0,n]:!1,Gt=(n,e)=>typeof n=="function"?n:n===!1?!1:e,Fr=({serverURL:n,path:e=location.pathname,lang:t=typeof navigator>"u"?"en-US":navigator.language,locale:l,emoji:i=Xn,meta:a=["nick","mail","link"],requiredMeta:o=[],dark:r=!1,pageSize:s=10,wordLimit:d,imageUploader:c,highlighter:w,texRenderer:p,copyright:$=!0,login:S="enable",search:_,reaction:b,recaptchaV3Key:h="",turnstileKey:y="",commentSorting:V="latest",...M})=>({serverURL:Br(n),path:Cr(e),lang:Nr(t),locale:{...Pr(t),...typeof l=="object"?l:{}},wordLimit:Dr(d),meta:Qn(a),requiredMeta:Qn(o),imageUploader:Gt(c,Rr),highlighter:Gt(w,Ur),texRenderer:Gt(p,Er),dark:r,emoji:typeof i=="boolean"?i?Xn:[]:i,pageSize:s,login:S,copyright:$,search:_===!1?!1:typeof _=="object"?_:Ar(t),recaptchaV3Key:h,turnstileKey:y,reaction:Array.isArray(b)?b:b===!0?Ir:[],commentSorting:V,...M}),xn=n=>typeof n=="string",Zt="{--waline-white:#000;--waline-light-grey:#666;--waline-dark-grey:#999;--waline-color:#888;--waline-bg-color:#1e1e1e;--waline-bg-color-light:#272727;--waline-bg-color-hover: #444;--waline-border-color:#333;--waline-disable-bg-color:#444;--waline-disable-color:#272727;--waline-bq-color:#272727;--waline-info-bg-color:#272727;--waline-info-color:#666}",Wr=n=>xn(n)?n==="auto"?`@media(prefers-color-scheme:dark){body${Zt}}`:`${n}${Zt}`:n===!0?`:root${Zt}`:"",Yt=(n,e)=>{let t=n.toString();for(;t.length<e;)t="0"+t;return t},qr=n=>{const e=Yt(n.getDate(),2),t=Yt(n.getMonth()+1,2);return`${Yt(n.getFullYear(),2)}-${t}-${e}`},Gr=(n,e,t)=>{if(!n)return"";const l=xn(n)?new Date(n.indexOf(" ")!==-1?n.replace(/-/g,"/"):n):n,i=e.getTime()-l.getTime(),a=Math.floor(i/(24*3600*1e3));if(a===0){const o=i%864e5,r=Math.floor(o/(3600*1e3));if(r===0){const s=o%36e5,d=Math.floor(s/(60*1e3));if(d===0){const c=s%6e4;return`${Math.round(c/1e3)} ${t.seconds}`}return`${d} ${t.minutes}`}return`${r} ${t.hours}`}return a<0?t.now:a<8?`${a} ${t.days}`:qr(l)},Zr=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Yr=n=>Zr.test(n),Kr=n=>!!/@[0-9]+\.[0-9]+\.[0-9]+/.test(n),Qr=n=>{const e=he("WALINE_EMOJI",{}),t=Kr(n);if(t){const l=e.value[n];if(l)return Promise.resolve(l)}return fetch(`${n}/info.json`).then(l=>l.json()).then(l=>{const i={folder:n,...l};return t&&(e.value[n]=i),i})},ol=(n,e="",t="",l="")=>`${e?`${e}/`:""}${t}${n}${l?`.${l}`:""}`,Xr=n=>Promise.all(n.map(e=>xn(e)?Qr(va(e)):Promise.resolve(e))).then(e=>{const t={tabs:[],map:{}};return e.forEach(l=>{const{name:i,folder:a,icon:o,prefix:r,type:s,items:d}=l;t.tabs.push({name:i,icon:ol(o,a,r,s),items:d.map(c=>{const w=`${r||""}${c}`;return t.map[w]=ol(c,a,r,s),w})})}),t}),Jr=n=>n.type.includes("image"),rl=n=>{const e=Array.from(n).find(Jr);return e?e.getAsFile():null},es=/\$.*?\$/,ts=/^\$(.*?)\$/,ns=/^(?:\s{0,3})\$\$((?:[^\n]|\n[^\n])+?)\n{0,1}\$\$/,ls=n=>[{name:"blockMath",level:"block",tokenizer(e){const t=ns.exec(e);if(t!==null)return{type:"html",raw:t[0],text:n(!0,t[1])}}},{name:"inlineMath",level:"inline",start(e){const t=e.search(es);return t!==-1?t:e.length},tokenizer(e){const t=ts.exec(e);if(t!==null)return{type:"html",raw:t[0],text:n(!1,t[1])}}}],ka=(n="",e={})=>n.replace(/:(.+?):/g,(t,l)=>e[l]?`<img class="wl-emoji" src="${e[l]}" alt="${l}">`:t),as=(n,{emojiMap:e,highlighter:t,texRenderer:l})=>{const i=new bn;if(i.setOptions({breaks:!0}),t&&i.use(ua({highlight:t})),l){const a=ls(l);i.use({extensions:a})}return i.parse(ka(n,e))},is=n=>n.match(/[\w\d\s,.\u00C0-\u024F\u0400-\u04FF]+/giu),os=n=>n.match(/[\u4E00-\u9FD5]/gu),rs=n=>{var e,t;return(((e=is(n))==null?void 0:e.reduce((l,i)=>l+(["",",","."].includes(i.trim())?0:i.trim().split(/\s+/u).length),0))||0)+(((t=os(n))==null?void 0:t.length)||0)},ss=async()=>{if(!navigator)return"";const{userAgentData:n}=navigator;let e=navigator.userAgent;if(!n||n.platform!=="Windows")return e;const{platformVersion:t}=await n.getHighEntropyValues(["platformVersion"]);return t&&parseInt(t.split(".")[0])>=13&&(e=e.replace("Windows NT 10.0","Windows NT 11.0")),e},cs={class:"wl-comment"},us={key:0,class:"wl-login-info"},ds={class:"wl-avatar"},ps=["title"],hs=["title"],ms=["src"],vs=["title","textContent"],gs={class:"wl-panel"},fs=["for","textContent"],ks=["id","onUpdate:modelValue","name","type"],ys=["placeholder"],ws={class:"wl-preview"},bs=m("hr",null,null,-1),$s=["innerHTML"],_s={class:"wl-footer"},xs={class:"wl-actions"},Cs={href:"https://guides.github.com/features/mastering-markdown/",title:"Markdown Guide","aria-label":"Markdown is supported",class:"wl-action",target:"_blank",rel:"noopener noreferrer"},Ls=["title"],Is=["title"],Rs=["title"],Es=["title"],As={class:"wl-info"},zs=m("div",{class:"wl-captcha-container"},null,-1),Ss={class:"wl-text-number"},Ts={key:0},js=["textContent"],Ms=["textContent"],Us=["disabled"],Vs=["placeholder"],Hs={key:1,class:"wl-loading"},Os={key:0,class:"wl-tab-wrapper"},Ps=["title","onClick"],Ns=["src","alt"],Bs={key:0,class:"wl-tabs"},Ds=["onClick"],Fs=["src","alt","title"],Ws=["title"];var qs=ne({__name:"CommentBox",props:{edit:{default:null},rootId:{default:""},replyId:{default:""},replyUser:{default:""}},emits:["log","cancelEdit","cancelReply","submit"],setup(n,{expose:e,emit:t}){const l=n,i=t;e();const a=Fe("config"),o=ar(),r=lr(),s=_n(),d=E({}),c=E(null),w=E(null),p=E(null),$=E(null),S=E(null),_=E(null),b=E(null),h=E({tabs:[],map:{}}),y=E(0),V=E(!1),M=E(!1),A=E(!1),U=E(""),oe=E(0),O=jl({loading:!0,list:[]}),ue=E(0),re=E(!1),we=E(""),le=E(!1),R=E(!1),x=N(()=>a.value.locale),j=N(()=>{var f;return!!((f=s.value)!=null&&f.token)}),Z=N(()=>a.value.imageUploader!==!1),q=f=>{const g=c.value,C=g.selectionStart,H=g.selectionEnd||0,L=g.scrollTop;o.value=g.value.substring(0,C)+f+g.value.substring(H,g.value.length),g.focus(),g.selectionStart=C+f.length,g.selectionEnd=C+f.length,g.scrollTop=L},ee=f=>{const g=f.key;(f.ctrlKey||f.metaKey)&&g==="Enter"&&Ye()},Y=f=>{const g=`![${a.value.locale.uploading} ${f.name}]()`;return q(g),le.value=!0,Promise.resolve().then(()=>a.value.imageUploader(f)).then(C=>{o.value=o.value.replace(g,`\r
![${f.name}](${C})`)}).catch(C=>{alert(C.message),o.value=o.value.replace(g,"")}).then(()=>{le.value=!1})},me=f=>{var g;if((g=f.dataTransfer)!=null&&g.items){const C=rl(f.dataTransfer.items);C&&Z.value&&(Y(C),f.preventDefault())}},Ze=f=>{if(f.clipboardData){const g=rl(f.clipboardData.items);g&&Z.value&&Y(g)}},Se=()=>{const f=w.value;f.files&&Z.value&&Y(f.files[0]).then(()=>{f.value=""})},Ye=async()=>{var f,g,C,H,L,G;const{serverURL:W,lang:ae,login:be,wordLimit:tt,requiredMeta:nt,recaptchaV3Key:lt,turnstileKey:at}=a.value,Ft=await ss(),D={comment:we.value,nick:r.value.nick,mail:r.value.mail,link:r.value.link,url:a.value.path,ua:Ft};if((f=s.value)!=null&&f.token&&!l.edit)D.nick=s.value.display_name,D.mail=s.value.email,D.link=s.value.url;else{if(be==="force")return;if(nt.indexOf("nick")>-1&&!D.nick)return(g=d.value.nick)==null||g.focus(),alert(x.value.nickError);if(nt.indexOf("mail")>-1&&!D.mail||D.mail&&!Yr(D.mail))return(C=d.value.mail)==null||C.focus(),alert(x.value.mailError);D.nick||(D.nick=x.value.anonymous)}if(!D.comment){(H=c.value)==null||H.focus();return}if(!re.value)return alert(x.value.wordHint.replace("$0",tt[0].toString()).replace("$1",tt[1].toString()).replace("$2",oe.value.toString()));D.comment=ka(D.comment,h.value.map),l.replyId&&l.rootId&&(D.pid=l.replyId,D.rid=l.rootId,D.at=l.replyUser),le.value=!0;try{lt&&(D.recaptchaV3=await sr(lt).execute("social")),at&&(D.turnstile=await cr(at).execute("social"));const $e={serverURL:W,lang:ae,token:(L=s.value)==null?void 0:L.token,comment:D},Te=await(l.edit?Le({objectId:l.edit.objectId,...$e}):Kl($e));if(le.value=!1,Te.errmsg)return alert(Te.errmsg);i("submit",Te.data),o.value="",U.value="",l.replyId&&i("cancelReply"),(G=l.edit)!=null&&G.objectId&&i("cancelEdit")}catch($e){le.value=!1,alert($e.message)}},Bt=f=>{f.preventDefault();const{lang:g,serverURL:C}=a.value;Xl({serverURL:C,lang:g}).then(H=>{s.value=H,(H.remember?localStorage:sessionStorage).setItem("WALINE_USER",JSON.stringify(H)),i("log")})},Dt=()=>{s.value={},localStorage.setItem("WALINE_USER","null"),sessionStorage.setItem("WALINE_USER","null"),i("log")},Ke=f=>{f.preventDefault();const{lang:g,serverURL:C}=a.value,H=800,L=800,G=(window.innerWidth-H)/2,W=(window.innerHeight-L)/2,ae=new URLSearchParams({lng:g,token:s.value.token}),be=window.open(`${C}/ui/profile?${ae.toString()}`,"_blank",`width=${H},height=${L},left=${G},top=${W},scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no`);be==null||be.postMessage({type:"TOKEN",data:s.value.token},"*")},Qe=f=>{var g,C,H,L;!((g=p.value)!=null&&g.contains(f.target))&&!((C=$.value)!=null&&C.contains(f.target))&&(V.value=!1),!((H=S.value)!=null&&H.contains(f.target))&&!((L=_.value)!=null&&L.contains(f.target))&&(M.value=!1)},Xe=async f=>{var g;const{scrollTop:C,clientHeight:H,scrollHeight:L}=f.target,G=(H+C)/L,W=a.value.search,ae=((g=b.value)==null?void 0:g.value)||"";G<.9||O.loading||R.value||(O.loading=!0,(W.more&&O.list.length?await W.more(ae,O.list.length):await W.search(ae)).length?O.list=[...O.list,...W.more&&O.list.length?await W.more(ae,O.list.length):await W.search(ae)]:R.value=!0,O.loading=!1,setTimeout(()=>{f.target.scrollTop=C},50))},Je=Nl(f=>{O.list=[],R.value=!1,Xe(f)},300);se([a,oe],([f,g])=>{const{wordLimit:C}=f;C?g<C[0]&&C[0]!==0?(ue.value=C[0],re.value=!1):g>C[1]?(ue.value=C[1],re.value=!1):(ue.value=C[1],re.value=!0):(ue.value=0,re.value=!0)},{immediate:!0});const et=({data:f})=>{!f||f.type!=="profile"||(s.value={...s.value,...f.data},[localStorage,sessionStorage].filter(g=>g.getItem("WALINE_USER")).forEach(g=>g.setItem("WALINE_USER",JSON.stringify(s))))};return ve(()=>{var f;document.body.addEventListener("click",Qe),window.addEventListener("message",et),(f=l.edit)!=null&&f.objectId&&(o.value=l.edit.orig),se(M,async g=>{if(!g)return;const C=a.value.search;b.value&&(b.value.value=""),O.loading=!0,O.list=C.default?await C.default():await C.search(""),O.loading=!1}),se(()=>o.value,g=>{const{highlighter:C,texRenderer:H}=a.value;we.value=g,U.value=as(g,{emojiMap:h.value.map,highlighter:C,texRenderer:H}),oe.value=rs(g),g?At(c.value):At.destroy(c.value)},{immediate:!0}),se(()=>a.value.emoji,g=>Xr(g).then(C=>{h.value=C}),{immediate:!0})}),We(()=>{document.body.removeEventListener("click",Qe),window.removeEventListener("message",et)}),(f,g)=>{var C,H;return u(),v("div",cs,[k(a).login!=="disable"&&j.value&&!((C=f.edit)!=null&&C.objectId)?(u(),v("div",us,[m("div",ds,[m("button",{type:"submit",class:"wl-logout-btn",title:x.value.logout,onClick:Dt},[P(k(qn),{size:14})],8,ps),m("a",{href:"#",class:"wl-login-nick","aria-label":"Profile",title:x.value.profile,onClick:Ke},[m("img",{src:k(s).avatar,alt:"avatar"},null,8,ms)],8,hs)]),m("a",{href:"#",class:"wl-login-nick","aria-label":"Profile",title:x.value.profile,onClick:Ke,textContent:z(k(s).display_name)},null,8,vs)])):I("v-if",!0),m("div",gs,[k(a).login!=="force"&&k(a).meta.length&&!j.value?(u(),v("div",{key:0,class:B(["wl-header",`item${k(a).meta.length}`])},[(u(!0),v(F,null,J(k(a).meta,L=>(u(),v("div",{key:L,class:"wl-header-item"},[m("label",{for:`wl-${L}`,textContent:z(x.value[L]+(k(a).requiredMeta.includes(L)||!k(a).requiredMeta.length?"":`(${x.value.optional})`))},null,8,fs),fe(m("input",{id:`wl-${L}`,ref_for:!0,ref:G=>{G&&(d.value[L]=G)},"onUpdate:modelValue":G=>k(r)[L]=G,class:B(["wl-input",`wl-${L}`]),name:L,type:L==="mail"?"email":"text"},null,10,ks),[[Ml,k(r)[L]]])]))),128))],2)):I("v-if",!0),fe(m("textarea",{id:"wl-edit",ref_key:"editorRef",ref:c,"onUpdate:modelValue":g[0]||(g[0]=L=>Vl(o)?o.value=L:null),class:"wl-editor",placeholder:f.replyUser?`@${f.replyUser}`:x.value.placeholder,onKeydown:ee,onDrop:me,onPaste:Ze},null,40,ys),[[Ul,k(o)]]),fe(m("div",ws,[bs,m("h4",null,z(x.value.preview)+":",1),m("div",{class:"wl-content",innerHTML:U.value},null,8,$s)],512),[[Oe,A.value]]),m("div",_s,[m("div",xs,[m("a",Cs,[P(k(Xo))]),fe(m("button",{ref_key:"emojiButtonRef",ref:p,type:"button",class:B(["wl-action",{active:V.value}]),title:x.value.emoji,onClick:g[1]||(g[1]=L=>V.value=!V.value)},[P(k(Zo))],10,Ls),[[Oe,h.value.tabs.length]]),k(a).search?(u(),v("button",{key:0,ref_key:"gifButtonRef",ref:S,type:"button",class:B(["wl-action",{active:M.value}]),title:x.value.gif,onClick:g[2]||(g[2]=L=>M.value=!M.value)},[P(k(nr))],10,Is)):I("v-if",!0),m("input",{id:"wl-image-upload",ref_key:"imageUploadRef",ref:w,class:"upload",type:"file",accept:".png,.jpg,.jpeg,.webp,.bmp,.gif",onChange:Se},null,544),Z.value?(u(),v("label",{key:1,for:"wl-image-upload",class:"wl-action",title:x.value.uploadImage},[P(k(Yo))],8,Rs)):I("v-if",!0),m("button",{type:"button",class:B(["wl-action",{active:A.value}]),title:x.value.preview,onClick:g[3]||(g[3]=L=>A.value=!A.value)},[P(k(Qo))],10,Es)]),m("div",As,[zs,m("div",Ss,[ce(z(oe.value)+" ",1),k(a).wordLimit?(u(),v("span",Ts,[ce("  /  "),m("span",{class:B({illegal:!re.value}),textContent:z(ue.value)},null,10,js)])):I("v-if",!0),ce("  "+z(x.value.word),1)]),k(a).login!=="disable"&&!j.value?(u(),v("button",{key:0,type:"button",class:"wl-btn",onClick:Bt,textContent:z(x.value.login)},null,8,Ms)):I("v-if",!0),k(a).login!=="force"||j.value?(u(),v("button",{key:1,type:"submit",class:"primary wl-btn",title:"Cmd|Ctrl + Enter",disabled:le.value,onClick:Ye},[le.value?(u(),K(k(ht),{key:0,size:16})):(u(),v(F,{key:1},[ce(z(x.value.submit),1)],64))],8,Us)):I("v-if",!0)]),m("div",{ref_key:"gifPopupRef",ref:_,class:B(["wl-gif-popup",{display:M.value}])},[m("input",{ref_key:"gifSearchInputRef",ref:b,type:"text",placeholder:x.value.gifSearchPlaceholder,onInput:g[4]||(g[4]=(...L)=>k(Je)&&k(Je)(...L))},null,40,Vs),O.list.length?(u(),K(xr,{key:0,items:O.list,"column-width":200,gap:6,onInsert:g[5]||(g[5]=L=>q(L)),onScroll:Xe},null,8,["items"])):I("v-if",!0),O.loading?(u(),v("div",Hs,[P(k(ht),{size:30})])):I("v-if",!0)],2),m("div",{ref_key:"emojiPopupRef",ref:$,class:B(["wl-emoji-popup",{display:V.value}])},[(u(!0),v(F,null,J(h.value.tabs,(L,G)=>(u(),v(F,{key:L.name},[G===y.value?(u(),v("div",Os,[(u(!0),v(F,null,J(L.items,W=>(u(),v("button",{key:W,type:"button",title:W,onClick:ae=>q(`:${W}:`)},[V.value?(u(),v("img",{key:0,class:"wl-emoji",src:h.value.map[W],alt:W,loading:"lazy",referrerPolicy:"no-referrer"},null,8,Ns)):I("v-if",!0)],8,Ps))),128))])):I("v-if",!0)],64))),128)),h.value.tabs.length>1?(u(),v("div",Bs,[(u(!0),v(F,null,J(h.value.tabs,(L,G)=>(u(),v("button",{key:L.name,type:"button",class:B(["wl-tab",{active:y.value===G}]),onClick:W=>y.value=G},[m("img",{class:"wl-emoji",src:L.icon,alt:L.name,title:L.name,loading:"lazy",referrerPolicy:"no-referrer"},null,8,Fs)],10,Ds))),128))])):I("v-if",!0)],2)])]),f.replyId||(H=f.edit)!=null&&H.objectId?(u(),v("button",{key:1,type:"button",class:"wl-close",title:x.value.cancelReply,onClick:g[6]||(g[6]=L=>f.$emit(f.replyId?"cancelReply":"cancelEdit"))},[P(k(qn),{size:24})],8,Ws)):I("v-if",!0)])}}}),ya=wt(qs,[["__file","CommentBox.vue"]]);const Gs=["id"],Zs={class:"wl-user","aria-hidden":"true"},Ys=["src"],Ks={class:"wl-card"},Qs={class:"wl-head"},Xs=["href"],Js={key:1,class:"wl-nick"},ec=["textContent"],tc=["textContent"],nc=["textContent"],lc=["textContent"],ac=["textContent"],ic={class:"wl-comment-actions"},oc=["title"],rc=["title"],sc={class:"wl-meta","aria-hidden":"true"},cc=["data-value","textContent"],uc=["innerHTML"],dc={key:1,class:"wl-admin-actions"},pc={class:"wl-comment-status"},hc=["disabled","onClick","textContent"],mc={key:3,class:"wl-quote"};var vc=ne({__name:"CommentCard",props:{comment:{},edit:{default:null},rootId:{},reply:{default:null}},emits:["log","submit","delete","edit","like","status","sticky","reply"],setup(n,{emit:e}){const t=n,l=e,i=["approved","waiting","spam"],a=Fe("config"),o=ma(),r=Hl(),s=_n(),d=N(()=>a.value.locale),c=N(()=>{const{link:h}=t.comment;return h?ga(h)?h:`https://${h}`:""}),w=N(()=>o.value.includes(t.comment.objectId)),p=N(()=>Gr(new Date(t.comment.time),r.value,d.value)),$=N(()=>s.value.type==="administrator"),S=N(()=>t.comment.user_id&&s.value.objectId===t.comment.user_id),_=N(()=>{var h;return t.comment.objectId===((h=t.reply)==null?void 0:h.objectId)}),b=N(()=>{var h;return t.comment.objectId===((h=t.edit)==null?void 0:h.objectId)});return(h,y)=>{var V;const M=De("CommentCard",!0);return u(),v("div",{id:h.comment.objectId,class:"wl-card-item"},[m("div",Zs,[h.comment.avatar?(u(),v("img",{key:0,class:"wl-user-avatar",src:h.comment.avatar},null,8,Ys)):I("v-if",!0),h.comment.type?(u(),K(k(tr),{key:1})):I("v-if",!0)]),m("div",Ks,[m("div",Qs,[c.value?(u(),v("a",{key:0,class:"wl-nick",href:c.value,target:"_blank",rel:"nofollow noopener noreferrer"},z(h.comment.nick),9,Xs)):(u(),v("span",Js,z(h.comment.nick),1)),h.comment.type==="administrator"?(u(),v("span",{key:2,class:"wl-badge",textContent:z(d.value.admin)},null,8,ec)):I("v-if",!0),h.comment.label?(u(),v("span",{key:3,class:"wl-badge",textContent:z(h.comment.label)},null,8,tc)):I("v-if",!0),h.comment.sticky?(u(),v("span",{key:4,class:"wl-badge",textContent:z(d.value.sticky)},null,8,nc)):I("v-if",!0),typeof h.comment.level=="number"?(u(),v("span",{key:5,class:B(`wl-badge level${h.comment.level}`),textContent:z(d.value[`level${h.comment.level}`]||`Level ${h.comment.level}`)},null,10,lc)):I("v-if",!0),m("span",{class:"wl-time",textContent:z(p.value)},null,8,ac),m("div",ic,[$.value||S.value?(u(),v(F,{key:0},[m("button",{type:"button",class:"wl-edit",onClick:y[0]||(y[0]=A=>l("edit",h.comment))},[P(k(er))]),m("button",{type:"button",class:"wl-delete",onClick:y[1]||(y[1]=A=>l("delete",h.comment))},[P(k(Go))])],64)):I("v-if",!0),m("button",{type:"button",class:"wl-like",title:w.value?d.value.cancelLike:d.value.like,onClick:y[2]||(y[2]=A=>l("like",h.comment))},[P(k(Ko),{active:w.value},null,8,["active"]),ce(" "+z("like"in h.comment?h.comment.like:""),1)],8,oc),m("button",{type:"button",class:B(["wl-reply",{active:_.value}]),title:_.value?d.value.cancelReply:d.value.reply,onClick:y[3]||(y[3]=A=>l("reply",_.value?null:h.comment))},[P(k(Jo))],10,rc)])]),m("div",sc,[(u(),v(F,null,J(["addr","browser","os"],A=>(u(),v(F,null,[h.comment[A]?(u(),v("span",{key:A,class:B(`wl-${A}`),"data-value":h.comment[A],textContent:z(h.comment[A])},null,10,cc)):I("v-if",!0)],64))),64))]),b.value?I("v-if",!0):(u(),v("div",{key:0,class:"wl-content",innerHTML:h.comment.comment},null,8,uc)),$.value&&!b.value?(u(),v("div",dc,[m("span",pc,[(u(),v(F,null,J(i,A=>m("button",{key:A,type:"submit",class:B(`wl-btn wl-${A}`),disabled:h.comment.status===A,onClick:U=>l("status",{status:A,comment:h.comment}),textContent:z(d.value[A])},null,10,hc)),64))]),$.value&&!("rid"in h.comment)?(u(),v("button",{key:0,type:"submit",class:"wl-btn wl-sticky",onClick:y[4]||(y[4]=A=>l("sticky",h.comment))},z(h.comment.sticky?d.value.unsticky:d.value.sticky),1)):I("v-if",!0)])):I("v-if",!0),_.value||b.value?(u(),v("div",{key:2,class:B({"wl-reply-wrapper":_.value,"wl-edit-wrapper":b.value})},[P(ya,{edit:h.edit,"reply-id":(V=h.reply)==null?void 0:V.objectId,"reply-user":h.comment.nick,"root-id":h.rootId,onLog:y[5]||(y[5]=A=>l("log")),onCancelReply:y[6]||(y[6]=A=>l("reply",null)),onCancelEdit:y[7]||(y[7]=A=>l("edit",null)),onSubmit:y[8]||(y[8]=A=>l("submit",A))},null,8,["edit","reply-id","reply-user","root-id"])],2)):I("v-if",!0),"children"in h.comment?(u(),v("div",mc,[(u(!0),v(F,null,J(h.comment.children,A=>(u(),K(M,{key:A.objectId,comment:A,reply:h.reply,edit:h.edit,"root-id":h.rootId,onLog:y[9]||(y[9]=U=>l("log")),onDelete:y[10]||(y[10]=U=>l("delete",U)),onEdit:y[11]||(y[11]=U=>l("edit",U)),onLike:y[12]||(y[12]=U=>l("like",U)),onReply:y[13]||(y[13]=U=>l("reply",U)),onStatus:y[14]||(y[14]=U=>l("status",U)),onSticky:y[15]||(y[15]=U=>l("sticky",U)),onSubmit:y[16]||(y[16]=U=>l("submit",U))},null,8,["comment","reply","edit","root-id"]))),128))])):I("v-if",!0)])],8,Gs)}}}),gc=wt(vc,[["__file","CommentCard.vue"]]);const fc="3.1.3",kc={"data-waline":""},yc={class:"wl-meta-head"},wc={class:"wl-count"},bc=["textContent"],$c={class:"wl-sort"},_c=["onClick"],xc={class:"wl-cards"},Cc={key:1,class:"wl-operation"},Lc=["textContent"],Ic={key:2,class:"wl-loading"},Rc=["textContent"],Ec={key:4,class:"wl-operation"},Ac=["textContent"],zc={key:5,class:"wl-power"},Sc=m("a",{href:"https://github.com/walinejs/waline",target:"_blank",rel:"noopener noreferrer"}," Waline ",-1);var Tc=ne({__name:"WalineComment",props:["serverURL","path","meta","requiredMeta","dark","commentSorting","lang","locale","pageSize","wordLimit","emoji","login","highlighter","texRenderer","imageUploader","search","copyright","recaptchaV3Key","turnstileKey","reaction"],setup(n){const e=n,t={latest:"insertedAt_desc",oldest:"insertedAt_asc",hottest:"like_desc"},l=Object.keys(t),i=_n(),a=ma(),o=E("loading"),r=E(0),s=E(1),d=E(0),c=N(()=>Fr(e)),w=E(c.value.commentSorting),p=E([]),$=E(null),S=E(null),_=N(()=>Wr(c.value.dark)),b=N(()=>c.value.locale);Ol(_,{id:"waline-darkmode"});let h;const y=R=>{var x;const{serverURL:j,path:Z,pageSize:q}=c.value,ee=new AbortController;o.value="loading",h==null||h(),Yl({serverURL:j,lang:c.value.lang,path:Z,pageSize:q,sortBy:t[w.value],page:R,signal:ee.signal,token:(x=i.value)==null?void 0:x.token}).then(Y=>{o.value="success",r.value=Y.count,p.value.push(...Y.data),s.value=R,d.value=Y.totalPages}).catch(Y=>{Y.name!=="AbortError"&&(console.error(Y.message),o.value="error")}),h=ee.abort.bind(ee)},V=()=>y(s.value+1),M=()=>{r.value=0,p.value=[],y(1)},A=R=>{w.value!==R&&(w.value=R,M())},U=R=>{$.value=R},oe=R=>{S.value=R},O=R=>{if(S.value)S.value.comment=R.comment,S.value.orig=R.orig;else if("rid"in R){const x=p.value.find(({objectId:j})=>j===R.rid);if(!x)return;Array.isArray(x.children)||(x.children=[]),x.children.push(R)}else p.value.unshift(R),r.value+=1},ue=async({comment:R,status:x})=>{var j;if(R.status===x)return;const{serverURL:Z,lang:q}=c.value;await Le({serverURL:Z,lang:q,token:(j=i.value)==null?void 0:j.token,objectId:R.objectId,comment:{status:x}}),R.status=x},re=async R=>{var x;if("rid"in R)return;const{serverURL:j,lang:Z}=c.value;await Le({serverURL:j,lang:Z,token:(x=i.value)==null?void 0:x.token,objectId:R.objectId,comment:{sticky:R.sticky?0:1}}),R.sticky=!R.sticky},we=async({objectId:R})=>{var x;if(!confirm("Are you sure you want to delete this comment?"))return;const{serverURL:j,lang:Z}=c.value;await Ql({serverURL:j,lang:Z,token:(x=i.value)==null?void 0:x.token,objectId:R}),p.value.some((q,ee)=>q.objectId===R?(p.value=p.value.filter((Y,me)=>me!==ee),!0):q.children.some((Y,me)=>Y.objectId===R?(p.value[ee].children=q.children.filter((Ze,Se)=>Se!==me),!0):!1))},le=async R=>{var x;const{serverURL:j,lang:Z}=c.value,{objectId:q}=R,ee=a.value.includes(q);await Le({serverURL:j,lang:Z,objectId:q,token:(x=i.value)==null?void 0:x.token,comment:{like:!ee}}),ee?a.value=a.value.filter(Y=>Y!==q):(a.value=[...a.value,q],a.value.length>50&&(a.value=a.value.slice(-50))),R.like=(R.like||0)+(ee?-1:1)};return Pl("config",c),ve(()=>{se(()=>[e.serverURL,e.path],()=>M(),{immediate:!0})}),We(()=>h==null?void 0:h()),(R,x)=>(u(),v("div",kc,[P(wr),$.value?I("v-if",!0):(u(),K(ya,{key:0,onLog:M,onSubmit:O})),m("div",yc,[m("div",wc,[r.value?(u(),v("span",{key:0,class:"wl-num",textContent:z(r.value)},null,8,bc)):I("v-if",!0),ce(" "+z(b.value.comment),1)]),m("ul",$c,[(u(!0),v(F,null,J(k(l),j=>(u(),v("li",{key:j,class:B([j===w.value?"active":""]),onClick:Z=>A(j)},z(b.value[j]),11,_c))),128))])]),m("div",xc,[(u(!0),v(F,null,J(p.value,j=>(u(),K(gc,{key:j.objectId,"root-id":j.objectId,comment:j,reply:$.value,edit:S.value,onLog:M,onReply:U,onEdit:oe,onSubmit:O,onStatus:ue,onDelete:we,onSticky:re,onLike:le},null,8,["root-id","comment","reply","edit"]))),128))]),o.value==="error"?(u(),v("div",Cc,[m("button",{type:"button",class:"wl-btn",onClick:M,textContent:z(b.value.refresh)},null,8,Lc)])):o.value==="loading"?(u(),v("div",Ic,[P(k(ht),{size:30})])):p.value.length?s.value<d.value?(u(),v("div",Ec,[m("button",{type:"button",class:"wl-btn",onClick:V,textContent:z(b.value.more)},null,8,Ac)])):I("v-if",!0):(u(),v("div",{key:3,class:"wl-empty",textContent:z(b.value.sofa)},null,8,Rc)),c.value.copyright?(u(),v("div",zc,[ce(" Powered by "),Sc,ce(" v"+z(k(fc)),1)])):I("v-if",!0)]))}}),jc=wt(Tc,[["__file","WalineComment.vue"]]);const Mc=["nick","mail","link"],sl=n=>n.filter(e=>Mc.includes(e)),cl=["//unpkg.com/@waline/emojis@1.1.0/weibo"],Uc=["//unpkg.com/@waline/emojis/tieba/tieba_agree.png","//unpkg.com/@waline/emojis/tieba/tieba_look_down.png","//unpkg.com/@waline/emojis/tieba/tieba_sunglasses.png","//unpkg.com/@waline/emojis/tieba/tieba_pick_nose.png","//unpkg.com/@waline/emojis/tieba/tieba_awkward.png","//unpkg.com/@waline/emojis/tieba/tieba_sleep.png"],Vc=n=>new Promise((e,t)=>{if(n.size>128*1e3)return t(new Error("File too large! File size limit 128KB"));const l=new FileReader;l.readAsDataURL(n),l.onload=()=>{var i;return e(((i=l.result)==null?void 0:i.toString())||"")},l.onerror=t}),Hc=n=>n===!0?'<p class="wl-tex">TeX is not available in preview</p>':'<span class="wl-tex">TeX is not available in preview</span>',Oc=n=>{const e=async(t,l={})=>fetch(`https://api.giphy.com/v1/gifs/${t}?${new URLSearchParams({lang:n,limit:"20",rating:"g",api_key:"6CIMLkNMMOhRcXPoMCPkFy4Ybk2XUiMp",...l}).toString()}`).then(i=>i.json()).then(({data:i})=>i.map(a=>({title:a.title,src:a.images.downsized_medium.url})));return{search:t=>e("search",{q:t,offset:"0"}),default:()=>e("trending",{}),more:(t,l=0)=>e("search",{q:t,offset:l.toString()})}},Pc=/[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|\w+/,Nc=/</,Bc=/(?:^|\s)\/\/(.+?)$/gm,Dc=/\/\*([\S\s]*?)\*\//gm,Fc=new RegExp(`(${Pc.source}|${Nc.source})|((?:${Bc.source})|(?:${Dc.source}))`,"gmi"),ul=["23AC69","91C132","F19726","E8552D","1AAB8E","E1147F","2980C1","1BA1E6","9FA0A0","F19726","E30B20","E30B20","A3338B"],Kt={},Wc=n=>{let e=0;return n.replace(Fc,(t,l,i)=>{if(i)return`<span style="color: slategray">${i}</span>`;if(l==="<")return"&lt;";let a;Kt[l]?a=Kt[l]:(a=ul[e],Kt[l]=a);const o=`<span style="color: #${a}">${l}</span>`;return e=++e%ul.length,o})},qc=["nick","nickError","mail","mailError","link","optional","placeholder","sofa","submit","like","cancelLike","reply","cancelReply","comment","refresh","more","preview","emoji","uploadImage","seconds","minutes","hours","days","now","uploading","login","logout","admin","sticky","word","wordHint","anonymous","level0","level1","level2","level3","level4","level5","gif","gifSearchPlaceholder","profile","approved","waiting","spam","unsticky","oldest","latest","hottest","reactionTitle"],Ee=n=>Object.fromEntries(n.map((e,t)=>[qc[t],e]));var dl=Ee(["NickName","NickName cannot be less than 3 bytes.","E-Mail","Please confirm your email address.","Website","Optional","Comment here...","No comment yet.","Submit","Like","Cancel like","Reply","Cancel reply","Comments","Refresh","Load More...","Preview","Emoji","Upload Image","seconds ago","minutes ago","hours ago","days ago","just now","Uploading","Login","logout","Admin","Sticky","Words",`Please input comments between $0 and $1 words!
 Current word number: $2`,"Anonymous","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Search GIF","Profile","Approved","Waiting","Spam","Unsticky","Oldest","Latest","Hottest","What do you think?"]),pl=Ee(["Pseudo","Le pseudo ne peut pas faire moins de 3 octets.","E-mail","Veuillez confirmer votre adresse e-mail.","Site Web","Optionnel","Commentez ici...","Aucun commentaire pour l'instant.","Envoyer","J'aime","Annuler le j'aime","Répondre","Annuler la réponse","Commentaires","Actualiser","Charger plus...","Aperçu","Emoji","Télécharger une image","Il y a quelques secondes","Il y a quelques minutes","Il y a quelques heures","Il y a quelques jours","À l'instant","Téléchargement en cours","Connexion","Déconnexion","Admin","Épinglé","Mots",`Veuillez saisir des commentaires entre $0 et $1 mots !
 Nombre actuel de mots : $2`,"Anonyme","Nains","Hobbits","Ents","Mages","Elfes","Maïar","GIF","Rechercher un GIF","Profil","Approuvé","En attente","Indésirable","Détacher","Le plus ancien","Dernier","Le plus populaire","Qu'en pensez-vous ?"]),hl=Ee(["ニックネーム","3バイト以上のニックネームをご入力ください.","メールアドレス","メールアドレスをご確認ください.","サイト","オプション","ここにコメント","コメントしましょう~","提出する","Like","Cancel like","返信する","キャンセル","コメント","更新","さらに読み込む","プレビュー","絵文字","画像をアップロード","秒前","分前","時間前","日前","たっだ今","アップロード","ログインする","ログアウト","管理者","トップに置く","ワード",`コメントは $0 から $1 ワードの間でなければなりません!
 現在の単語番号: $2`,"匿名","うえにん","なかにん","しもおし","特にしもおし","かげ","なぬし","GIF","探す GIF","個人情報","承認済み","待っている","スパム","べたつかない","逆順","正順","人気順","どう思いますか？"]),Gc=Ee(["Apelido","Apelido não pode ser menor que 3 bytes.","E-Mail","Por favor, confirme seu endereço de e-mail.","Website","Opcional","Comente aqui...","Nenhum comentário, ainda.","Enviar","Like","Cancel like","Responder","Cancelar resposta","Comentários","Refrescar","Carregar Mais...","Visualizar","Emoji","Enviar Imagem","segundos atrás","minutos atrás","horas atrás","dias atrás","agora mesmo","Enviando","Entrar","Sair","Admin","Sticky","Palavras",`Favor enviar comentário com $0 a $1 palavras!
 Número de palavras atuais: $2`,"Anônimo","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Pesquisar GIF","informação pessoal","Aprovado","Espera","Spam","Unsticky","Mais velho","Mais recentes","Mais quente","O que você acha?"]),ml=Ee(["Псевдоним","Никнейм не может быть меньше 3 байт.","Эл. адрес","Пожалуйста, подтвердите адрес вашей электронной почты.","Веб-сайт","Необязательный","Комментарий здесь...","Пока нет комментариев.","Отправить","Like","Cancel like","Отвечать","Отменить ответ","Комментарии","Обновить","Загрузи больше...","Превью","эмодзи","Загрузить изображение","секунд назад","несколько минут назад","несколько часов назад","дней назад","прямо сейчас","Загрузка","Авторизоваться","Выход из системы","Админ","Липкий","Слова",`Пожалуйста, введите комментарии от $0 до $1 слов!
Номер текущего слова: $2`,"Анонимный","Dwarves","Hobbits","Ents","Wizards","Elves","Maiar","GIF","Поиск GIF","Персональные данные","Одобренный","Ожидающий","Спам","Нелипкий","самый старый","последний","самый горячий","Что вы думаете?"]),vl=Ee(["Tên","Tên không được nhỏ hơn 3 ký tự.","E-Mail","Vui lòng xác nhập địa chỉ email của bạn.","Website","Tùy chọn","Hãy bình luận có văn hoá!","Chưa có bình luận","Gửi","Thích","Bỏ thích","Trả lời","Hủy bỏ","bình luận","Làm mới","Tải thêm...","Xem trước","Emoji","Tải lên hình ảnh","giây trước","phút trước","giờ trước","ngày trước","Vừa xong","Đang tải lên","Đăng nhập","đăng xuất","Quản trị viên","Dính","từ",`Bình luận phải có độ dài giữa $0 và $1 từ!
 Số từ hiện tại: $2`,"Vô danh","Người lùn","Người tí hon","Thần rừng","Pháp sư","Tiên tộc","Maiar","Ảnh GIF","Tìm kiếm ảnh GIF","thông tin cá nhân","Đã được phê duyệt","Đang chờ đợi","Thư rác","Không dính","lâu đời nhất","muộn nhất","nóng nhất","What do you think?"]),gl=Ee(["昵称","昵称不能少于3个字符","邮箱","请填写正确的邮件地址","网址","可选","欢迎评论","来发评论吧~","提交","喜欢","取消喜欢","回复","取消回复","评论","刷新","加载更多...","预览","表情","上传图片","秒前","分钟前","小时前","天前","刚刚","正在上传","登录","退出","博主","置顶","字",`评论字数应在 $0 到 $1 字之间！
当前字数：$2`,"匿名","潜水","冒泡","吐槽","活跃","话痨","传说","表情包","搜索表情包","个人资料","通过","待审核","垃圾","取消置顶","按倒序","按正序","按热度","你认为这篇文章怎么样？"]),Zc=Ee(["暱稱","暱稱不能少於3個字元","郵箱","請填寫正確的郵件地址","網址","可選","歡迎留言","來發留言吧~","送出","喜歡","取消喜歡","回覆","取消回覆","留言","重整","載入更多...","預覽","表情","上傳圖片","秒前","分鐘前","小時前","天前","剛剛","正在上傳","登入","登出","管理者","置頂","字",`留言字數應在 $0 到 $1 字之間！
目前字數：$2`,"匿名","潛水","冒泡","吐槽","活躍","多話","傳說","表情包","搜尋表情包","個人資料","通過","待審核","垃圾","取消置頂","最早","最新","熱門","你認為這篇文章怎麼樣？"]);const wa="en-US",ln={zh:gl,"zh-cn":gl,"zh-tw":Zc,en:dl,"en-us":dl,fr:pl,"fr-fr":pl,jp:hl,"jp-jp":hl,"pt-br":Gc,ru:ml,"ru-ru":ml,vi:vl,"vi-vn":vl},Yc=n=>ln[n.toLowerCase()]||ln[wa],Kc=n=>Object.keys(ln).includes(n.toLowerCase())?n:wa,ba=n=>{try{n=decodeURI(n)}catch{}return n},$a=(n="")=>n.replace(/\/$/u,""),_a=n=>/^(https?:)?\/\//.test(n),jt=n=>{const e=$a(n);return _a(e)?e:`https://${e}`},Qc=n=>Array.isArray(n)?n:n?[0,n]:!1,Qt=(n,e)=>typeof n=="function"?n:n===!1?!1:e,Xc=({serverURL:n,path:e=location.pathname,lang:t=typeof navigator>"u"?"en-US":navigator.language,locale:l,emoji:i=cl,meta:a=["nick","mail","link"],requiredMeta:o=[],dark:r=!1,pageSize:s=10,wordLimit:d,imageUploader:c,highlighter:w,texRenderer:p,copyright:$=!0,login:S="enable",search:_,reaction:b,recaptchaV3Key:h="",turnstileKey:y="",commentSorting:V="latest",...M})=>({serverURL:jt(n),path:ba(e),lang:Kc(t),locale:{...Yc(t),...typeof l=="object"?l:{}},wordLimit:Qc(d),meta:sl(a),requiredMeta:sl(o),imageUploader:Qt(c,Vc),highlighter:Qt(w,Wc),texRenderer:Qt(p,Hc),dark:r,emoji:typeof i=="boolean"?i?cl:[]:i,pageSize:s,login:S,copyright:$,search:_===!1?!1:typeof _=="object"?_:Oc(t),recaptchaV3Key:h,turnstileKey:y,reaction:Array.isArray(b)?b:b===!0?Uc:[],commentSorting:V,...M}),Cn=n=>typeof n=="string",Xt="{--waline-white:#000;--waline-light-grey:#666;--waline-dark-grey:#999;--waline-color:#888;--waline-bg-color:#1e1e1e;--waline-bg-color-light:#272727;--waline-bg-color-hover: #444;--waline-border-color:#333;--waline-disable-bg-color:#444;--waline-disable-color:#272727;--waline-bq-color:#272727;--waline-info-bg-color:#272727;--waline-info-color:#666}",Jc=n=>Cn(n)?n==="auto"?`@media(prefers-color-scheme:dark){body${Xt}}`:`${n}${Xt}`:n===!0?`:root${Xt}`:"",Jt=(n,e)=>{let t=n.toString();for(;t.length<e;)t="0"+t;return t},eu=n=>{const e=Jt(n.getDate(),2),t=Jt(n.getMonth()+1,2);return`${Jt(n.getFullYear(),2)}-${t}-${e}`},tu=(n,e,t)=>{if(!n)return"";const l=Cn(n)?new Date(n.indexOf(" ")!==-1?n.replace(/-/g,"/"):n):n,i=e.getTime()-l.getTime(),a=Math.floor(i/(24*3600*1e3));if(a===0){const o=i%864e5,r=Math.floor(o/(3600*1e3));if(r===0){const s=o%36e5,d=Math.floor(s/(60*1e3));if(d===0){const c=s%6e4;return`${Math.round(c/1e3)} ${t.seconds}`}return`${d} ${t.minutes}`}return`${r} ${t.hours}`}return a<0?t.now:a<8?`${a} ${t.days}`:eu(l)},nu=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lu=n=>nu.test(n),au=n=>!!/@[0-9]+\.[0-9]+\.[0-9]+/.test(n),iu=n=>{const e=he("WALINE_EMOJI",{}),t=au(n);if(t){const l=e.value[n];if(l)return Promise.resolve(l)}return fetch(`${n}/info.json`).then(l=>l.json()).then(l=>{const i={folder:n,...l};return t&&(e.value[n]=i),i})},fl=(n,e="",t="",l="")=>`${e?`${e}/`:""}${t}${n}${l?`.${l}`:""}`,ou=n=>Promise.all(n.map(e=>Cn(e)?iu($a(e)):Promise.resolve(e))).then(e=>{const t={tabs:[],map:{}};return e.forEach(l=>{const{name:i,folder:a,icon:o,prefix:r,type:s,items:d}=l;t.tabs.push({name:i,icon:fl(o,a,r,s),items:d.map(c=>{const w=`${r||""}${c}`;return t.map[w]=fl(c,a,r,s),w})})}),t}),xa=n=>{n.name!=="AbortError"&&console.error(n.message)},ru=n=>n.type.includes("image"),kl=n=>{const e=Array.from(n).find(ru);return e?e.getAsFile():null},su=/\$.*?\$/,cu=/^\$(.*?)\$/,uu=/^(?:\s{0,3})\$\$((?:[^\n]|\n[^\n])+?)\n{0,1}\$\$/,du=n=>[{name:"blockMath",level:"block",tokenizer(e){const t=uu.exec(e);if(t!==null)return{type:"html",raw:t[0],text:n(!0,t[1])}}},{name:"inlineMath",level:"inline",start(e){const t=e.search(su);return t!==-1?t:e.length},tokenizer(e){const t=cu.exec(e);if(t!==null)return{type:"html",raw:t[0],text:n(!1,t[1])}}}],Ca=(n="",e={})=>n.replace(/:(.+?):/g,(t,l)=>e[l]?`<img class="wl-emoji" src="${e[l]}" alt="${l}">`:t),pu=(n,{emojiMap:e,highlighter:t,texRenderer:l})=>{const i=new bn;if(i.setOptions({breaks:!0}),t&&i.use(ua({highlight:t})),l){const a=du(l);i.use({extensions:a})}return i.parse(Ca(n,e))},an=n=>n.dataset.path||null,hu=n=>n.match(/[\w\d\s,.\u00C0-\u024F\u0400-\u04FF]+/giu),mu=n=>n.match(/[\u4E00-\u9FD5]/gu),vu=n=>{var e,t;return(((e=hu(n))==null?void 0:e.reduce((l,i)=>l+(["",",","."].includes(i.trim())?0:i.trim().split(/\s+/u).length),0))||0)+(((t=mu(n))==null?void 0:t.length)||0)},gu=async()=>{if(!navigator)return"";const{userAgentData:n}=navigator;let e=navigator.userAgent;if(!n||n.platform!=="Windows")return e;const{platformVersion:t}=await n.getHighEntropyValues(["platformVersion"]);return t&&parseInt(t.split(".")[0])>=13&&(e=e.replace("Windows NT 10.0","Windows NT 11.0")),e},fu=({serverURL:n,path:e=window.location.pathname,selector:t=".waline-comment-count",lang:l=navigator.language})=>{const i=new AbortController,a=document.querySelectorAll(t);return a.length&&eo({serverURL:jt(n),paths:Array.from(a).map(o=>ba(an(o)||e)),lang:l,signal:i.signal}).then(o=>{a.forEach((r,s)=>{r.innerText=o[s].toString()})}).catch(xa),i.abort.bind(i)},yl=({size:n})=>T("svg",{class:"wl-close-icon",viewBox:"0 0 1024 1024",width:n,height:n},[T("path",{d:"M697.173 85.333h-369.92c-144.64 0-241.92 101.547-241.92 252.587v348.587c0 150.613 97.28 252.16 241.92 252.16h369.92c144.64 0 241.494-101.547 241.494-252.16V337.92c0-151.04-96.854-252.587-241.494-252.587z",fill:"currentColor"}),T("path",{d:"m640.683 587.52-75.947-75.861 75.904-75.862a37.29 37.29 0 0 0 0-52.778 37.205 37.205 0 0 0-52.779 0l-75.946 75.818-75.862-75.946a37.419 37.419 0 0 0-52.821 0 37.419 37.419 0 0 0 0 52.821l75.947 75.947-75.776 75.733a37.29 37.29 0 1 0 52.778 52.821l75.776-75.776 75.947 75.947a37.376 37.376 0 0 0 52.779-52.821z",fill:"#888"})]),ku=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"m341.013 394.667 27.755 393.45h271.83l27.733-393.45h64.106l-28.01 397.952a64 64 0 0 1-63.83 59.498H368.768a64 64 0 0 1-63.83-59.52l-28.053-397.93h64.128zm139.307 19.818v298.667h-64V414.485h64zm117.013 0v298.667h-64V414.485h64zM181.333 288h640v64h-640v-64zm453.483-106.667v64h-256v-64h256z",fill:"red"})),yu=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z",fill:"currentColor"})),wu=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[T("path",{d:"M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z",fill:"currentColor"}),T("path",{d:"M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z",fill:"currentColor"})]),bu=({active:n=!1})=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[T("path",{d:`M850.654 323.804c-11.042-25.625-26.862-48.532-46.885-68.225-20.022-19.61-43.258-34.936-69.213-45.73-26.78-11.124-55.124-16.727-84.375-16.727-40.622 0-80.256 11.123-114.698 32.135A214.79 214.79 0 0 0 512 241.819a214.79 214.79 0 0 0-23.483-16.562c-34.442-21.012-74.076-32.135-114.698-32.135-29.25 0-57.595 5.603-84.375 16.727-25.872 10.711-49.19 26.12-69.213 45.73-20.105 19.693-35.843 42.6-46.885 68.225-11.453 26.615-17.303 54.877-17.303 83.963 0 27.439 5.603 56.03 16.727 85.117 9.31 24.307 22.659 49.52 39.715 74.981 27.027 40.293 64.188 82.316 110.33 124.915 76.465 70.615 152.189 119.394 155.402 121.371l19.528 12.525c8.652 5.52 19.776 5.52 28.427 0l19.529-12.525c3.213-2.06 78.854-50.756 155.401-121.371 46.143-42.6 83.304-84.622 110.33-124.915 17.057-25.46 30.487-50.674 39.716-74.981 11.124-29.087 16.727-57.678 16.727-85.117.082-29.086-5.768-57.348-17.221-83.963z${n?"":"M512 761.5S218.665 573.55 218.665 407.767c0-83.963 69.461-152.023 155.154-152.023 60.233 0 112.473 33.618 138.181 82.727 25.708-49.109 77.948-82.727 138.18-82.727 85.694 0 155.155 68.06 155.155 152.023C805.335 573.551 512 761.5 512 761.5z"}`,fill:n?"red":"currentColor"})]),$u=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},[T("path",{d:"M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0",fill:"currentColor"}),T("path",{d:"M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0",fill:"currentColor"})]),_u=()=>T("svg",{width:"16",height:"16",ariaHidden:"true"},T("path",{d:"M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z",fill:"currentColor"})),xu=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"M810.667 213.333a64 64 0 0 1 64 64V704a64 64 0 0 1-64 64H478.336l-146.645 96.107a21.333 21.333 0 0 1-33.024-17.856V768h-85.334a64 64 0 0 1-64-64V277.333a64 64 0 0 1 64-64h597.334zm0 64H213.333V704h149.334v63.296L459.243 704h351.424V277.333zm-271.36 213.334v64h-176.64v-64h176.64zm122.026-128v64H362.667v-64h298.666z",fill:"currentColor"})),Cu=()=>T("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24"},T("path",{d:"M813.039 318.772L480.53 651.278H360.718V531.463L693.227 198.961C697.904 194.284 704.027 192 710.157 192C716.302 192 722.436 194.284 727.114 198.961L813.039 284.88C817.72 289.561 820 295.684 820 301.825C820 307.95 817.72 314.093 813.039 318.772ZM710.172 261.888L420.624 551.431V591.376H460.561L750.109 301.825L710.172 261.888ZM490.517 291.845H240.906V771.09H720.156V521.479C720.156 504.947 733.559 491.529 750.109 491.529C766.653 491.529 780.063 504.947 780.063 521.479V791.059C780.063 813.118 762.18 831 740.125 831H220.937C198.882 831 181 813.118 181 791.059V271.872C181 249.817 198.882 231.935 220.937 231.935H490.517C507.06 231.935 520.47 245.352 520.47 261.888C520.47 278.424 507.06 291.845 490.517 291.845Z",fill:"currentColor"})),Lu=()=>T("svg",{class:"verified-icon",viewBox:"0 0 1024 1024",width:"14",height:"14"},T("path",{d:"m894.4 461.56-54.4-63.2c-10.4-12-18.8-34.4-18.8-50.4v-68c0-42.4-34.8-77.2-77.2-77.2h-68c-15.6 0-38.4-8.4-50.4-18.8l-63.2-54.4c-27.6-23.6-72.8-23.6-100.8 0l-62.8 54.8c-12 10-34.8 18.4-50.4 18.4h-69.2c-42.4 0-77.2 34.8-77.2 77.2v68.4c0 15.6-8.4 38-18.4 50l-54 63.6c-23.2 27.6-23.2 72.4 0 100l54 63.6c10 12 18.4 34.4 18.4 50v68.4c0 42.4 34.8 77.2 77.2 77.2h69.2c15.6 0 38.4 8.4 50.4 18.8l63.2 54.4c27.6 23.6 72.8 23.6 100.8 0l63.2-54.4c12-10.4 34.4-18.8 50.4-18.8h68c42.4 0 77.2-34.8 77.2-77.2v-68c0-15.6 8.4-38.4 18.8-50.4l54.4-63.2c23.2-27.6 23.2-73.2-.4-100.8zm-216-25.2-193.2 193.2a30 30 0 0 1-42.4 0l-96.8-96.8a30.16 30.16 0 0 1 0-42.4c11.6-11.6 30.8-11.6 42.4 0l75.6 75.6 172-172c11.6-11.6 30.8-11.6 42.4 0 11.6 11.6 11.6 30.8 0 42.4z",fill:"#27ae60"})),mt=({size:n=100})=>T("svg",{width:n,height:n,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},T("circle",{cx:50,cy:50,fill:"none",stroke:"currentColor",strokeWidth:"4",r:"40","stroke-dasharray":"85 30"},T("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;360 50 50",keyTimes:"0;1"}))),Iu=()=>T("svg",{width:24,height:24,fill:"currentcolor",viewBox:"0 0 24 24"},[T("path",{style:"transform: translateY(0.5px)",d:"M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"}),T("path",{d:"M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"})]),Ru=()=>he("WALINE_USER_META",{nick:"",mail:"",link:""}),Eu=()=>he("WALINE_COMMENT_BOX_EDITOR",""),Au="WALINE_LIKE";let wl=null;const La=()=>wl||(wl=he(Au,[])),zu="WALINE_REACTION";let bl=null;const Su=()=>bl??(bl=he(zu,{})),$l={},Tu=n=>{const e=$l[n]??($l[n]=$n.load(n,{useRecaptchaNet:!0,autoHideBadge:!0}));return{execute:t=>e.then(l=>l.execute(t))}},ju=n=>({execute:async e=>{const{load:t}=Bl("https://challenges.cloudflare.com/turnstile/v0/api.js",void 0,{async:!1});await t();const l=window==null?void 0:window.turnstile;return new Promise(i=>{l==null||l.ready(()=>{l==null||l.render(".wl-captcha-container",{sitekey:n,action:e,size:"compact",callback:i})})})}}),Mu="WALINE_USER";let _l=null;const Ln=()=>_l??(_l=he(Mu,{})),Uu={key:0,class:"wl-reaction"},Vu=["textContent"],Hu={class:"wl-reaction-list"},Ou=["onClick"],Pu={class:"wl-reaction-img"},Nu=["src","alt"],Bu=["textContent"],Du=["textContent"];var Fu=ne({__name:"ArticleReaction",setup(n,{expose:e}){e();const t=Su(),l=Fe("config"),i=E(-1),a=E([]),o=N(()=>l.value.locale),r=N(()=>l.value.reaction.length>0),s=N(()=>{const{reaction:p,path:$}=l.value;return p.map((S,_)=>({icon:S,desc:o.value[`reaction${_}`],active:t.value[$]===_}))});let d;const c=async()=>{if(!r.value)return;const{serverURL:p,lang:$,path:S,reaction:_}=l.value,b=new AbortController;d=b.abort.bind(b);const h=await hn({serverURL:p,lang:$,paths:[S],type:_.map((y,V)=>`reaction${V}`),signal:b.signal});a.value=_.map((y,V)=>h[0][`reaction${V}`])},w=async p=>{if(i.value===-1){const{serverURL:$,lang:S,path:_}=l.value,b=t.value[_];i.value=p,b!==void 0&&(await pt({serverURL:$,lang:S,path:_,type:`reaction${b}`,action:"desc"}),a.value[b]=Math.max(a.value[b]-1,0)),b!==p&&(await pt({serverURL:$,lang:S,path:_,type:`reaction${p}`}),a.value[p]=(a.value[p]||0)+1),b===p?delete t.value[_]:t.value[_]=p,i.value=-1}};return ve(()=>{se(()=>[l.value.serverURL,l.value.path],()=>{c()},{immediate:!0})}),We(()=>d==null?void 0:d()),(p,$)=>s.value.length?(u(),v("div",Uu,[m("div",{class:"wl-reaction-title",textContent:z(o.value.reactionTitle)},null,8,Vu),m("ul",Hu,[(u(!0),v(F,null,J(s.value,({active:S,icon:_,desc:b},h)=>(u(),v("li",{key:h,class:B(["wl-reaction-item",{active:S}]),onClick:y=>w(h)},[m("div",Pu,[m("img",{src:_,alt:b},null,8,Nu),i.value===h?(u(),K(k(mt),{key:0,class:"wl-reaction-loading"})):(u(),v("div",{key:1,class:"wl-reaction-votes",textContent:z(a.value[h]||0)},null,8,Bu))]),m("div",{class:"wl-reaction-text",textContent:z(b)},null,8,Du)],10,Ou))),128))])])):I("v-if",!0)}}),bt=(n,e)=>{const t=n.__vccOpts||n;for(const[l,i]of e)t[l]=i;return t},Wu=bt(Fu,[["__file","ArticleReaction.vue"]]);const qu=["data-index"],Gu=["src","title","onClick"];var Zu=ne({__name:"ImageWall",props:{items:{default:()=>[]},columnWidth:{default:300},gap:{default:0}},emits:["insert"],setup(n,{expose:e}){const t=n;e();let l=null;const i=E(null),a=E({}),o=E([]),r=()=>{const p=Math.floor((i.value.getBoundingClientRect().width+t.gap)/(t.columnWidth+t.gap));return p>0?p:1},s=p=>new Array(p).fill(null).map(()=>[]),d=async p=>{var $;if(p>=t.items.length)return;await pn();const S=Array.from((($=i.value)==null?void 0:$.children)||[]).reduce((_,b)=>b.getBoundingClientRect().height<_.getBoundingClientRect().height?b:_);o.value[Number(S.dataset.index)].push(p),await d(p+1)},c=async(p=!1)=>{if(o.value.length===r()&&!p)return;o.value=s(r());const $=window.scrollY;await d(0),window.scrollTo({top:$})},w=p=>{a.value[p.target.src]=!0};return ve(()=>{c(!0),l=new ResizeObserver(()=>{c()}),l.observe(i.value),se(()=>[t.items],()=>{a.value={},c(!0)}),se(()=>[t.columnWidth,t.gap],()=>{c()})}),Tl(()=>l.unobserve(i.value)),(p,$)=>(u(),v("div",{ref_key:"wall",ref:i,class:"wl-gallery",style:dt({gap:`${p.gap}px`})},[(u(!0),v(F,null,J(o.value,(S,_)=>(u(),v("div",{key:_,class:"wl-gallery-column","data-index":_,style:dt({gap:`${p.gap}px`})},[(u(!0),v(F,null,J(S,b=>(u(),v(F,{key:b},[a.value[p.items[b].src]?I("v-if",!0):(u(),K(k(mt),{key:0,size:36,style:{margin:"20px auto"}})),m("img",{class:"wl-gallery-item",src:p.items[b].src,title:p.items[b].title,loading:"lazy",onLoad:w,onClick:h=>p.$emit("insert",`![](${p.items[b].src})`)},null,40,Gu)],64))),128))],12,qu))),128))],4))}}),Yu=bt(Zu,[["__file","ImageWall.vue"]]);const Ku={class:"wl-comment"},Qu={key:0,class:"wl-login-info"},Xu={class:"wl-avatar"},Ju=["title"],e1=["title"],t1=["src"],n1=["title","textContent"],l1={class:"wl-panel"},a1=["for","textContent"],i1=["id","onUpdate:modelValue","name","type"],o1=["placeholder"],r1={class:"wl-preview"},s1=m("hr",null,null,-1),c1=["innerHTML"],u1={class:"wl-footer"},d1={class:"wl-actions"},p1={href:"https://guides.github.com/features/mastering-markdown/",title:"Markdown Guide","aria-label":"Markdown is supported",class:"wl-action",target:"_blank",rel:"noopener noreferrer"},h1=["title"],m1=["title"],v1=["title"],g1=["title"],f1={class:"wl-info"},k1=m("div",{class:"wl-captcha-container"},null,-1),y1={class:"wl-text-number"},w1={key:0},b1=["textContent"],$1=["textContent"],_1=["disabled"],x1=["placeholder"],C1={key:1,class:"wl-loading"},L1={key:0,class:"wl-tab-wrapper"},I1=["title","onClick"],R1=["src","alt"],E1={key:0,class:"wl-tabs"},A1=["onClick"],z1=["src","alt","title"],S1=["title"];var T1=ne({__name:"CommentBox",props:{edit:{default:null},rootId:{default:""},replyId:{default:""},replyUser:{default:""}},emits:["log","cancelEdit","cancelReply","submit"],setup(n,{expose:e,emit:t}){const l=n,i=t;e();const a=Fe("config"),o=Eu(),r=Ru(),s=Ln(),d=E({}),c=E(null),w=E(null),p=E(null),$=E(null),S=E(null),_=E(null),b=E(null),h=E({tabs:[],map:{}}),y=E(0),V=E(!1),M=E(!1),A=E(!1),U=E(""),oe=E(0),O=jl({loading:!0,list:[]}),ue=E(0),re=E(!1),we=E(""),le=E(!1),R=E(!1),x=N(()=>a.value.locale),j=N(()=>{var f;return!!((f=s.value)!=null&&f.token)}),Z=N(()=>a.value.imageUploader!==!1),q=f=>{const g=c.value,C=g.selectionStart,H=g.selectionEnd||0,L=g.scrollTop;o.value=g.value.substring(0,C)+f+g.value.substring(H,g.value.length),g.focus(),g.selectionStart=C+f.length,g.selectionEnd=C+f.length,g.scrollTop=L},ee=f=>{const g=f.key;(f.ctrlKey||f.metaKey)&&g==="Enter"&&Ye()},Y=f=>{const g=`![${a.value.locale.uploading} ${f.name}]()`;return q(g),le.value=!0,Promise.resolve().then(()=>a.value.imageUploader(f)).then(C=>{o.value=o.value.replace(g,`\r
![${f.name}](${C})`)}).catch(C=>{alert(C.message),o.value=o.value.replace(g,"")}).then(()=>{le.value=!1})},me=f=>{var g;if((g=f.dataTransfer)!=null&&g.items){const C=kl(f.dataTransfer.items);C&&Z.value&&(Y(C),f.preventDefault())}},Ze=f=>{if(f.clipboardData){const g=kl(f.clipboardData.items);g&&Z.value&&Y(g)}},Se=()=>{const f=w.value;f.files&&Z.value&&Y(f.files[0]).then(()=>{f.value=""})},Ye=async()=>{var f,g,C,H,L,G;const{serverURL:W,lang:ae,login:be,wordLimit:tt,requiredMeta:nt,recaptchaV3Key:lt,turnstileKey:at}=a.value,Ft=await gu(),D={comment:we.value,nick:r.value.nick,mail:r.value.mail,link:r.value.link,url:a.value.path,ua:Ft};if((f=s.value)!=null&&f.token&&!l.edit)D.nick=s.value.display_name,D.mail=s.value.email,D.link=s.value.url;else{if(be==="force")return;if(nt.indexOf("nick")>-1&&!D.nick)return(g=d.value.nick)==null||g.focus(),alert(x.value.nickError);if(nt.indexOf("mail")>-1&&!D.mail||D.mail&&!lu(D.mail))return(C=d.value.mail)==null||C.focus(),alert(x.value.mailError);D.nick||(D.nick=x.value.anonymous)}if(!D.comment){(H=c.value)==null||H.focus();return}if(!re.value)return alert(x.value.wordHint.replace("$0",tt[0].toString()).replace("$1",tt[1].toString()).replace("$2",oe.value.toString()));D.comment=Ca(D.comment,h.value.map),l.replyId&&l.rootId&&(D.pid=l.replyId,D.rid=l.rootId,D.at=l.replyUser),le.value=!0;try{lt&&(D.recaptchaV3=await Tu(lt).execute("social")),at&&(D.turnstile=await ju(at).execute("social"));const $e={serverURL:W,lang:ae,token:(L=s.value)==null?void 0:L.token,comment:D},Te=await(l.edit?Le({objectId:l.edit.objectId,...$e}):Kl($e));if(le.value=!1,Te.errmsg)return alert(Te.errmsg);i("submit",Te.data),o.value="",U.value="",l.replyId&&i("cancelReply"),(G=l.edit)!=null&&G.objectId&&i("cancelEdit")}catch($e){le.value=!1,alert($e.message)}},Bt=f=>{f.preventDefault();const{lang:g,serverURL:C}=a.value;Xl({serverURL:C,lang:g}).then(H=>{s.value=H,(H.remember?localStorage:sessionStorage).setItem("WALINE_USER",JSON.stringify(H)),i("log")})},Dt=()=>{s.value={},localStorage.setItem("WALINE_USER","null"),sessionStorage.setItem("WALINE_USER","null"),i("log")},Ke=f=>{f.preventDefault();const{lang:g,serverURL:C}=a.value,H=800,L=800,G=(window.innerWidth-H)/2,W=(window.innerHeight-L)/2,ae=new URLSearchParams({lng:g,token:s.value.token}),be=window.open(`${C}/ui/profile?${ae.toString()}`,"_blank",`width=${H},height=${L},left=${G},top=${W},scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no`);be==null||be.postMessage({type:"TOKEN",data:s.value.token},"*")},Qe=f=>{var g,C,H,L;!((g=p.value)!=null&&g.contains(f.target))&&!((C=$.value)!=null&&C.contains(f.target))&&(V.value=!1),!((H=S.value)!=null&&H.contains(f.target))&&!((L=_.value)!=null&&L.contains(f.target))&&(M.value=!1)},Xe=async f=>{var g;const{scrollTop:C,clientHeight:H,scrollHeight:L}=f.target,G=(H+C)/L,W=a.value.search,ae=((g=b.value)==null?void 0:g.value)||"";G<.9||O.loading||R.value||(O.loading=!0,(W.more&&O.list.length?await W.more(ae,O.list.length):await W.search(ae)).length?O.list=[...O.list,...W.more&&O.list.length?await W.more(ae,O.list.length):await W.search(ae)]:R.value=!0,O.loading=!1,setTimeout(()=>{f.target.scrollTop=C},50))},Je=Nl(f=>{O.list=[],R.value=!1,Xe(f)},300);se([a,oe],([f,g])=>{const{wordLimit:C}=f;C?g<C[0]&&C[0]!==0?(ue.value=C[0],re.value=!1):g>C[1]?(ue.value=C[1],re.value=!1):(ue.value=C[1],re.value=!0):(ue.value=0,re.value=!0)},{immediate:!0});const et=({data:f})=>{!f||f.type!=="profile"||(s.value={...s.value,...f.data},[localStorage,sessionStorage].filter(g=>g.getItem("WALINE_USER")).forEach(g=>g.setItem("WALINE_USER",JSON.stringify(s))))};return ve(()=>{var f;document.body.addEventListener("click",Qe),window.addEventListener("message",et),(f=l.edit)!=null&&f.objectId&&(o.value=l.edit.orig),se(M,async g=>{if(!g)return;const C=a.value.search;b.value&&(b.value.value=""),O.loading=!0,O.list=C.default?await C.default():await C.search(""),O.loading=!1}),se(()=>o.value,g=>{const{highlighter:C,texRenderer:H}=a.value;we.value=g,U.value=pu(g,{emojiMap:h.value.map,highlighter:C,texRenderer:H}),oe.value=vu(g),g?At(c.value):At.destroy(c.value)},{immediate:!0}),se(()=>a.value.emoji,g=>ou(g).then(C=>{h.value=C}),{immediate:!0})}),We(()=>{document.body.removeEventListener("click",Qe),window.removeEventListener("message",et)}),(f,g)=>{var C,H;return u(),v("div",Ku,[k(a).login!=="disable"&&j.value&&!((C=f.edit)!=null&&C.objectId)?(u(),v("div",Qu,[m("div",Xu,[m("button",{type:"submit",class:"wl-logout-btn",title:x.value.logout,onClick:Dt},[P(k(yl),{size:14})],8,Ju),m("a",{href:"#",class:"wl-login-nick","aria-label":"Profile",title:x.value.profile,onClick:Ke},[m("img",{src:k(s).avatar,alt:"avatar"},null,8,t1)],8,e1)]),m("a",{href:"#",class:"wl-login-nick","aria-label":"Profile",title:x.value.profile,onClick:Ke,textContent:z(k(s).display_name)},null,8,n1)])):I("v-if",!0),m("div",l1,[k(a).login!=="force"&&k(a).meta.length&&!j.value?(u(),v("div",{key:0,class:B(["wl-header",`item${k(a).meta.length}`])},[(u(!0),v(F,null,J(k(a).meta,L=>(u(),v("div",{key:L,class:"wl-header-item"},[m("label",{for:`wl-${L}`,textContent:z(x.value[L]+(k(a).requiredMeta.includes(L)||!k(a).requiredMeta.length?"":`(${x.value.optional})`))},null,8,a1),fe(m("input",{id:`wl-${L}`,ref_for:!0,ref:G=>{G&&(d.value[L]=G)},"onUpdate:modelValue":G=>k(r)[L]=G,class:B(["wl-input",`wl-${L}`]),name:L,type:L==="mail"?"email":"text"},null,10,i1),[[Ml,k(r)[L]]])]))),128))],2)):I("v-if",!0),fe(m("textarea",{id:"wl-edit",ref_key:"editorRef",ref:c,"onUpdate:modelValue":g[0]||(g[0]=L=>Vl(o)?o.value=L:null),class:"wl-editor",placeholder:f.replyUser?`@${f.replyUser}`:x.value.placeholder,onKeydown:ee,onDrop:me,onPaste:Ze},null,40,o1),[[Ul,k(o)]]),fe(m("div",r1,[s1,m("h4",null,z(x.value.preview)+":",1),m("div",{class:"wl-content",innerHTML:U.value},null,8,c1)],512),[[Oe,A.value]]),m("div",u1,[m("div",d1,[m("a",p1,[P(k(_u))]),fe(m("button",{ref_key:"emojiButtonRef",ref:p,type:"button",class:B(["wl-action",{active:V.value}]),title:x.value.emoji,onClick:g[1]||(g[1]=L=>V.value=!V.value)},[P(k(yu))],10,h1),[[Oe,h.value.tabs.length]]),k(a).search?(u(),v("button",{key:0,ref_key:"gifButtonRef",ref:S,type:"button",class:B(["wl-action",{active:M.value}]),title:x.value.gif,onClick:g[2]||(g[2]=L=>M.value=!M.value)},[P(k(Iu))],10,m1)):I("v-if",!0),m("input",{id:"wl-image-upload",ref_key:"imageUploadRef",ref:w,class:"upload",type:"file",accept:".png,.jpg,.jpeg,.webp,.bmp,.gif",onChange:Se},null,544),Z.value?(u(),v("label",{key:1,for:"wl-image-upload",class:"wl-action",title:x.value.uploadImage},[P(k(wu))],8,v1)):I("v-if",!0),m("button",{type:"button",class:B(["wl-action",{active:A.value}]),title:x.value.preview,onClick:g[3]||(g[3]=L=>A.value=!A.value)},[P(k($u))],10,g1)]),m("div",f1,[k1,m("div",y1,[ce(z(oe.value)+" ",1),k(a).wordLimit?(u(),v("span",w1,[ce("  /  "),m("span",{class:B({illegal:!re.value}),textContent:z(ue.value)},null,10,b1)])):I("v-if",!0),ce("  "+z(x.value.word),1)]),k(a).login!=="disable"&&!j.value?(u(),v("button",{key:0,type:"button",class:"wl-btn",onClick:Bt,textContent:z(x.value.login)},null,8,$1)):I("v-if",!0),k(a).login!=="force"||j.value?(u(),v("button",{key:1,type:"submit",class:"primary wl-btn",title:"Cmd|Ctrl + Enter",disabled:le.value,onClick:Ye},[le.value?(u(),K(k(mt),{key:0,size:16})):(u(),v(F,{key:1},[ce(z(x.value.submit),1)],64))],8,_1)):I("v-if",!0)]),m("div",{ref_key:"gifPopupRef",ref:_,class:B(["wl-gif-popup",{display:M.value}])},[m("input",{ref_key:"gifSearchInputRef",ref:b,type:"text",placeholder:x.value.gifSearchPlaceholder,onInput:g[4]||(g[4]=(...L)=>k(Je)&&k(Je)(...L))},null,40,x1),O.list.length?(u(),K(Yu,{key:0,items:O.list,"column-width":200,gap:6,onInsert:g[5]||(g[5]=L=>q(L)),onScroll:Xe},null,8,["items"])):I("v-if",!0),O.loading?(u(),v("div",C1,[P(k(mt),{size:30})])):I("v-if",!0)],2),m("div",{ref_key:"emojiPopupRef",ref:$,class:B(["wl-emoji-popup",{display:V.value}])},[(u(!0),v(F,null,J(h.value.tabs,(L,G)=>(u(),v(F,{key:L.name},[G===y.value?(u(),v("div",L1,[(u(!0),v(F,null,J(L.items,W=>(u(),v("button",{key:W,type:"button",title:W,onClick:ae=>q(`:${W}:`)},[V.value?(u(),v("img",{key:0,class:"wl-emoji",src:h.value.map[W],alt:W,loading:"lazy",referrerPolicy:"no-referrer"},null,8,R1)):I("v-if",!0)],8,I1))),128))])):I("v-if",!0)],64))),128)),h.value.tabs.length>1?(u(),v("div",E1,[(u(!0),v(F,null,J(h.value.tabs,(L,G)=>(u(),v("button",{key:L.name,type:"button",class:B(["wl-tab",{active:y.value===G}]),onClick:W=>y.value=G},[m("img",{class:"wl-emoji",src:L.icon,alt:L.name,title:L.name,loading:"lazy",referrerPolicy:"no-referrer"},null,8,z1)],10,A1))),128))])):I("v-if",!0)],2)])]),f.replyId||(H=f.edit)!=null&&H.objectId?(u(),v("button",{key:1,type:"button",class:"wl-close",title:x.value.cancelReply,onClick:g[6]||(g[6]=L=>f.$emit(f.replyId?"cancelReply":"cancelEdit"))},[P(k(yl),{size:24})],8,S1)):I("v-if",!0)])}}}),Ia=bt(T1,[["__file","CommentBox.vue"]]);const j1=["id"],M1={class:"wl-user","aria-hidden":"true"},U1=["src"],V1={class:"wl-card"},H1={class:"wl-head"},O1=["href"],P1={key:1,class:"wl-nick"},N1=["textContent"],B1=["textContent"],D1=["textContent"],F1=["textContent"],W1=["textContent"],q1={class:"wl-comment-actions"},G1=["title"],Z1=["title"],Y1={class:"wl-meta","aria-hidden":"true"},K1=["data-value","textContent"],Q1=["innerHTML"],X1={key:1,class:"wl-admin-actions"},J1={class:"wl-comment-status"},ed=["disabled","onClick","textContent"],td={key:3,class:"wl-quote"};var nd=ne({__name:"CommentCard",props:{comment:{},edit:{default:null},rootId:{},reply:{default:null}},emits:["log","submit","delete","edit","like","status","sticky","reply"],setup(n,{emit:e}){const t=n,l=e,i=["approved","waiting","spam"],a=Fe("config"),o=La(),r=Hl(),s=Ln(),d=N(()=>a.value.locale),c=N(()=>{const{link:h}=t.comment;return h?_a(h)?h:`https://${h}`:""}),w=N(()=>o.value.includes(t.comment.objectId)),p=N(()=>tu(new Date(t.comment.time),r.value,d.value)),$=N(()=>s.value.type==="administrator"),S=N(()=>t.comment.user_id&&s.value.objectId===t.comment.user_id),_=N(()=>{var h;return t.comment.objectId===((h=t.reply)==null?void 0:h.objectId)}),b=N(()=>{var h;return t.comment.objectId===((h=t.edit)==null?void 0:h.objectId)});return(h,y)=>{var V;const M=De("CommentCard",!0);return u(),v("div",{id:h.comment.objectId,class:"wl-card-item"},[m("div",M1,[h.comment.avatar?(u(),v("img",{key:0,class:"wl-user-avatar",src:h.comment.avatar},null,8,U1)):I("v-if",!0),h.comment.type?(u(),K(k(Lu),{key:1})):I("v-if",!0)]),m("div",V1,[m("div",H1,[c.value?(u(),v("a",{key:0,class:"wl-nick",href:c.value,target:"_blank",rel:"nofollow noopener noreferrer"},z(h.comment.nick),9,O1)):(u(),v("span",P1,z(h.comment.nick),1)),h.comment.type==="administrator"?(u(),v("span",{key:2,class:"wl-badge",textContent:z(d.value.admin)},null,8,N1)):I("v-if",!0),h.comment.label?(u(),v("span",{key:3,class:"wl-badge",textContent:z(h.comment.label)},null,8,B1)):I("v-if",!0),h.comment.sticky?(u(),v("span",{key:4,class:"wl-badge",textContent:z(d.value.sticky)},null,8,D1)):I("v-if",!0),typeof h.comment.level=="number"?(u(),v("span",{key:5,class:B(`wl-badge level${h.comment.level}`),textContent:z(d.value[`level${h.comment.level}`]||`Level ${h.comment.level}`)},null,10,F1)):I("v-if",!0),m("span",{class:"wl-time",textContent:z(p.value)},null,8,W1),m("div",q1,[$.value||S.value?(u(),v(F,{key:0},[m("button",{type:"button",class:"wl-edit",onClick:y[0]||(y[0]=A=>l("edit",h.comment))},[P(k(Cu))]),m("button",{type:"button",class:"wl-delete",onClick:y[1]||(y[1]=A=>l("delete",h.comment))},[P(k(ku))])],64)):I("v-if",!0),m("button",{type:"button",class:"wl-like",title:w.value?d.value.cancelLike:d.value.like,onClick:y[2]||(y[2]=A=>l("like",h.comment))},[P(k(bu),{active:w.value},null,8,["active"]),ce(" "+z("like"in h.comment?h.comment.like:""),1)],8,G1),m("button",{type:"button",class:B(["wl-reply",{active:_.value}]),title:_.value?d.value.cancelReply:d.value.reply,onClick:y[3]||(y[3]=A=>l("reply",_.value?null:h.comment))},[P(k(xu))],10,Z1)])]),m("div",Y1,[(u(),v(F,null,J(["addr","browser","os"],A=>(u(),v(F,null,[h.comment[A]?(u(),v("span",{key:A,class:B(`wl-${A}`),"data-value":h.comment[A],textContent:z(h.comment[A])},null,10,K1)):I("v-if",!0)],64))),64))]),b.value?I("v-if",!0):(u(),v("div",{key:0,class:"wl-content",innerHTML:h.comment.comment},null,8,Q1)),$.value&&!b.value?(u(),v("div",X1,[m("span",J1,[(u(),v(F,null,J(i,A=>m("button",{key:A,type:"submit",class:B(`wl-btn wl-${A}`),disabled:h.comment.status===A,onClick:U=>l("status",{status:A,comment:h.comment}),textContent:z(d.value[A])},null,10,ed)),64))]),$.value&&!("rid"in h.comment)?(u(),v("button",{key:0,type:"submit",class:"wl-btn wl-sticky",onClick:y[4]||(y[4]=A=>l("sticky",h.comment))},z(h.comment.sticky?d.value.unsticky:d.value.sticky),1)):I("v-if",!0)])):I("v-if",!0),_.value||b.value?(u(),v("div",{key:2,class:B({"wl-reply-wrapper":_.value,"wl-edit-wrapper":b.value})},[P(Ia,{edit:h.edit,"reply-id":(V=h.reply)==null?void 0:V.objectId,"reply-user":h.comment.nick,"root-id":h.rootId,onLog:y[5]||(y[5]=A=>l("log")),onCancelReply:y[6]||(y[6]=A=>l("reply",null)),onCancelEdit:y[7]||(y[7]=A=>l("edit",null)),onSubmit:y[8]||(y[8]=A=>l("submit",A))},null,8,["edit","reply-id","reply-user","root-id"])],2)):I("v-if",!0),"children"in h.comment?(u(),v("div",td,[(u(!0),v(F,null,J(h.comment.children,A=>(u(),K(M,{key:A.objectId,comment:A,reply:h.reply,edit:h.edit,"root-id":h.rootId,onLog:y[9]||(y[9]=U=>l("log")),onDelete:y[10]||(y[10]=U=>l("delete",U)),onEdit:y[11]||(y[11]=U=>l("edit",U)),onLike:y[12]||(y[12]=U=>l("like",U)),onReply:y[13]||(y[13]=U=>l("reply",U)),onStatus:y[14]||(y[14]=U=>l("status",U)),onSticky:y[15]||(y[15]=U=>l("sticky",U)),onSubmit:y[16]||(y[16]=U=>l("submit",U))},null,8,["comment","reply","edit","root-id"]))),128))])):I("v-if",!0)])],8,j1)}}}),ld=bt(nd,[["__file","CommentCard.vue"]]);const ad="3.1.3",id={"data-waline":""},od={class:"wl-meta-head"},rd={class:"wl-count"},sd=["textContent"],cd={class:"wl-sort"},ud=["onClick"],dd={class:"wl-cards"},pd={key:1,class:"wl-operation"},hd=["textContent"],md={key:2,class:"wl-loading"},vd=["textContent"],gd={key:4,class:"wl-operation"},fd=["textContent"],kd={key:5,class:"wl-power"},yd=m("a",{href:"https://github.com/walinejs/waline",target:"_blank",rel:"noopener noreferrer"}," Waline ",-1);var wd=ne({__name:"WalineComment",props:["serverURL","path","meta","requiredMeta","dark","commentSorting","lang","locale","pageSize","wordLimit","emoji","login","highlighter","texRenderer","imageUploader","search","copyright","recaptchaV3Key","turnstileKey","reaction"],setup(n){const e=n,t={latest:"insertedAt_desc",oldest:"insertedAt_asc",hottest:"like_desc"},l=Object.keys(t),i=Ln(),a=La(),o=E("loading"),r=E(0),s=E(1),d=E(0),c=N(()=>Xc(e)),w=E(c.value.commentSorting),p=E([]),$=E(null),S=E(null),_=N(()=>Jc(c.value.dark)),b=N(()=>c.value.locale);Ol(_,{id:"waline-darkmode"});let h;const y=R=>{var x;const{serverURL:j,path:Z,pageSize:q}=c.value,ee=new AbortController;o.value="loading",h==null||h(),Yl({serverURL:j,lang:c.value.lang,path:Z,pageSize:q,sortBy:t[w.value],page:R,signal:ee.signal,token:(x=i.value)==null?void 0:x.token}).then(Y=>{o.value="success",r.value=Y.count,p.value.push(...Y.data),s.value=R,d.value=Y.totalPages}).catch(Y=>{Y.name!=="AbortError"&&(console.error(Y.message),o.value="error")}),h=ee.abort.bind(ee)},V=()=>y(s.value+1),M=()=>{r.value=0,p.value=[],y(1)},A=R=>{w.value!==R&&(w.value=R,M())},U=R=>{$.value=R},oe=R=>{S.value=R},O=R=>{if(S.value)S.value.comment=R.comment,S.value.orig=R.orig;else if("rid"in R){const x=p.value.find(({objectId:j})=>j===R.rid);if(!x)return;Array.isArray(x.children)||(x.children=[]),x.children.push(R)}else p.value.unshift(R),r.value+=1},ue=async({comment:R,status:x})=>{var j;if(R.status===x)return;const{serverURL:Z,lang:q}=c.value;await Le({serverURL:Z,lang:q,token:(j=i.value)==null?void 0:j.token,objectId:R.objectId,comment:{status:x}}),R.status=x},re=async R=>{var x;if("rid"in R)return;const{serverURL:j,lang:Z}=c.value;await Le({serverURL:j,lang:Z,token:(x=i.value)==null?void 0:x.token,objectId:R.objectId,comment:{sticky:R.sticky?0:1}}),R.sticky=!R.sticky},we=async({objectId:R})=>{var x;if(!confirm("Are you sure you want to delete this comment?"))return;const{serverURL:j,lang:Z}=c.value;await Ql({serverURL:j,lang:Z,token:(x=i.value)==null?void 0:x.token,objectId:R}),p.value.some((q,ee)=>q.objectId===R?(p.value=p.value.filter((Y,me)=>me!==ee),!0):q.children.some((Y,me)=>Y.objectId===R?(p.value[ee].children=q.children.filter((Ze,Se)=>Se!==me),!0):!1))},le=async R=>{var x;const{serverURL:j,lang:Z}=c.value,{objectId:q}=R,ee=a.value.includes(q);await Le({serverURL:j,lang:Z,objectId:q,token:(x=i.value)==null?void 0:x.token,comment:{like:!ee}}),ee?a.value=a.value.filter(Y=>Y!==q):(a.value=[...a.value,q],a.value.length>50&&(a.value=a.value.slice(-50))),R.like=(R.like||0)+(ee?-1:1)};return Pl("config",c),ve(()=>{se(()=>[e.serverURL,e.path],()=>M(),{immediate:!0})}),We(()=>h==null?void 0:h()),(R,x)=>(u(),v("div",id,[P(Wu),$.value?I("v-if",!0):(u(),K(Ia,{key:0,onLog:M,onSubmit:O})),m("div",od,[m("div",rd,[r.value?(u(),v("span",{key:0,class:"wl-num",textContent:z(r.value)},null,8,sd)):I("v-if",!0),ce(" "+z(b.value.comment),1)]),m("ul",cd,[(u(!0),v(F,null,J(k(l),j=>(u(),v("li",{key:j,class:B([j===w.value?"active":""]),onClick:Z=>A(j)},z(b.value[j]),11,ud))),128))])]),m("div",dd,[(u(!0),v(F,null,J(p.value,j=>(u(),K(ld,{key:j.objectId,"root-id":j.objectId,comment:j,reply:$.value,edit:S.value,onLog:M,onReply:U,onEdit:oe,onSubmit:O,onStatus:ue,onDelete:we,onSticky:re,onLike:le},null,8,["root-id","comment","reply","edit"]))),128))]),o.value==="error"?(u(),v("div",pd,[m("button",{type:"button",class:"wl-btn",onClick:M,textContent:z(b.value.refresh)},null,8,hd)])):o.value==="loading"?(u(),v("div",md,[P(k(mt),{size:30})])):p.value.length?s.value<d.value?(u(),v("div",gd,[m("button",{type:"button",class:"wl-btn",onClick:V,textContent:z(b.value.more)},null,8,fd)])):I("v-if",!0):(u(),v("div",{key:3,class:"wl-empty",textContent:z(b.value.sofa)},null,8,vd)),c.value.copyright?(u(),v("div",kd,[ce(" Powered by "),yd,ce(" v"+z(k(ad)),1)])):I("v-if",!0)]))}});bt(wd,[["__file","WalineComment.vue"]]);const xl=(n,e)=>{e.forEach((t,l)=>{const i=n[l].time;typeof i=="number"&&(t.innerText=i.toString())})},bd=({serverURL:n,path:e=window.location.pathname,selector:t=".waline-pageview-count",update:l=!0,lang:i=navigator.language})=>{const a=new AbortController,o=Array.from(document.querySelectorAll(t)),r=d=>{const c=an(d);return c!==null&&e!==c},s=d=>to({serverURL:jt(n),paths:d.map(c=>an(c)||e),lang:i,signal:a.signal}).then(c=>xl(c,d)).catch(xa);if(l){const d=o.filter(w=>!r(w)),c=o.filter(r);no({serverURL:jt(n),path:e,lang:i}).then(w=>xl(w,d)),c.length&&s(c)}else s(o);return a.abort.bind(a)};function Ra(n="//unpkg.com/",e=["bilibili","qq","weibo"]){return e.map(t=>`${n}@waline/emojis/${t}/`)}const $d=ne({__name:"WalineClient",props:{options:{}},setup(n){const e=n,t=Dl(),{locale:l}=Be(),i=N(()=>e.options.path||t.path.replace(/\/$/,"")),a=N(()=>Ra(e.options.cdn));return ve(()=>{const{pageview:o,comment:r}=e.options;o&&bd({serverURL:e.options.serverURL,path:i.value,selector:typeof o=="string"?o:void 0}),r&&fu({serverURL:e.options.serverURL,path:i.value,selector:typeof r=="string"?r:void 0})}),(o,r)=>(u(),K(k(jc),ui(o.options,{"server-u-r-l":o.options.serverURL,lang:k(l),path:i.value,dark:k(di),emoji:a.value}),null,16,["server-u-r-l","lang","path","dark","emoji"]))}});function Ea(){const n=Fl();return N(()=>n.value.addons["valaxy-addon-waline"])}const _d=Object.freeze(Object.defineProperty({__proto__:null,getEmojis:Ra,useAddonWaline:Ea},Symbol.toStringTag,{value:"Module"})),xd=ne({__name:"YunWaline",setup(n){if(dn(_d))throw new Error("Please install valaxy-addon-waline");const e=Ea();return(t,l)=>{const i=$d;return u(),K(i,{w:"full",options:k(e).options||{serverURL:""}},null,8,["options"])}}}),Cd=n=>(Al("data-v-add4a695"),n=n(),zl(),n),Ld={class:"relative h-8 w-30 text-[var(--va-c-text-2)] z-100"},Id=Cd(()=>m("div",{"inline-flex":"","i-ri-arrow-down-s-line":""},null,-1)),Rd={class:"select-options absolute translate-y-1 left-0 top-full w-full bg-[var(--va-c-bg-light)] overflow-hidden rounded-1 border"},Ed=["onClick"],Ad=ne({__name:"YunSelect",props:pi({options:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=hi(n,"modelValue"),t=E(!1);return mi("click",()=>{t.value=!1}),(l,i)=>(u(),v("div",Ld,[m("button",{class:B(["flex h-full w-full px-2 items-center justify-between border rounded-2 transition",t.value?"border-[var(--va-c-primary)] shadow-lg":""]),onClick:i[0]||(i[0]=vi(a=>t.value=!0,["stop"]))},[m("span",null,z(e.value),1),Id],2),P(gi,{persisted:""},{default:Ce(()=>[fe(m("ul",Rd,[(u(!0),v(F,null,J(l.options,a=>(u(),v("li",{key:a,class:"cursor-pointer list-none px-2 hover:bg-[var(--va-c-primary-lighter)] hover:text-white",onClick:o=>e.value=a},z(a),9,Ed))),128))],512),[[Oe,t.value]])]),_:1})]))}}),zd=cn(Ad,[["__scopeId","data-v-add4a695"]]),Sd={key:0,class:"flex justify-end w-full mb-2"},Td=ne({__name:"YunComment",setup(n){const e=Fl(),t=["valaxy-addon-waline","valaxy-addon-twikoo","valaxy-addon-artalk"],l=N(()=>t.filter(a=>e.value.addons[a]).map(a=>a.split("-")[2])),i=E(l.value[0]);return(a,o)=>{const r=zd,s=xd,d=Ji,c=Ki,w=De("ClientOnly"),p=Gl;return u(),K(p,{w:"full",p:"4",class:"comment yun-comment sm:p-6 lg:px-12 xl:px-16"},{default:Ce(()=>[P(w,null,{default:Ce(()=>[l.value.length>1?(u(),v("div",Sd,[P(r,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=$=>i.value=$),options:l.value},null,8,["modelValue","options"])])):I("v-if",!0),i.value==="waline"?(u(),K(s,{key:1})):I("v-if",!0),i.value==="twikoo"?(u(),K(d,{key:2})):I("v-if",!0),i.value==="artalk"?(u(),K(c,{key:3})):I("v-if",!0),ie(a.$slots,"default")]),_:3})]),_:3})}}}),jd={class:"post-nav"},Md={class:"post-nav-item"},Ud=m("div",{class:"icon","i-ri-arrow-left-s-line":""},null,-1),Vd={class:"title truncate",text:"sm"},Hd={class:"post-nav-item"},Od={class:"title truncate",text:"sm"},Pd=m("div",{class:"icon","i-ri-arrow-right-s-line":""},null,-1),Nd=ne({__name:"YunPostNav",setup(n){const[e,t]=fi();return(l,i)=>{const a=De("RouterLink");return u(),v("div",jd,[m("div",Md,[k(e)?(u(),K(a,{key:0,class:"post-nav-prev",to:k(e).path||"",title:k(e).title},{default:Ce(()=>[Ud,m("span",Vd,z(k(e).title),1)]),_:1},8,["to","title"])):I("v-if",!0)]),m("div",Hd,[k(t)?(u(),K(a,{key:0,to:k(t).path||"",title:k(t).title,class:"post-nav-next"},{default:Ce(()=>[m("span",Od,z(k(t).title),1),Pd]),_:1},8,["to","title"])):I("v-if",!0)])])}}}),Ae=typeof window<"u",Aa=Ae&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),za=Ae&&window.devicePixelRatio>1,Bd={elements_selector:".lazy",container:Aa||Ae?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},Sa=n=>Object.assign({},Bd,n),Cl=function(n,e){let t;const l="LazyLoad::Initialized",i=new n(e);try{t=new CustomEvent(l,{detail:{instance:i}})}catch{t=document.createEvent("CustomEvent"),t.initCustomEvent(l,!1,!1,{instance:i})}window.dispatchEvent(t)},Dd=(n,e)=>{if(e)if(e.length)for(let t,l=0;t=e[l];l+=1)Cl(n,t);else Cl(n,e)},_e="src",In="srcset",Rn="sizes",Ta="poster",$t="llOriginalAttrs",ja="data",En="loading",Ma="loaded",Ua="applied",Fd="entered",An="error",Va="native",Ha="data-",Oa="ll-status",de=(n,e)=>n.getAttribute(Ha+e),Wd=(n,e,t)=>{const l=Ha+e;t!==null?n.setAttribute(l,t):n.removeAttribute(l)},_t=n=>de(n,Oa),He=(n,e)=>Wd(n,Oa,e),Ht=n=>He(n,null),zn=n=>_t(n)===null,qd=n=>_t(n)===En,Gd=n=>_t(n)===An,Sn=n=>_t(n)===Va,Zd=[En,Ma,Ua,An],Yd=n=>Zd.indexOf(_t(n))>=0,ze=(n,e,t,l)=>{n&&typeof n=="function"&&(l===void 0?t===void 0?n(e):n(e,t):n(e,t,l))},Ge=(n,e)=>{Ae&&e!==""&&n.classList.add(e)},ge=(n,e)=>{Ae&&e!==""&&n.classList.remove(e)},Kd=n=>{n.llTempImage=document.createElement("IMG")},Qd=n=>{delete n.llTempImage},Pa=n=>n.llTempImage,Ot=(n,e)=>{if(!e)return;const t=e._observer;t&&t.unobserve(n)},Xd=n=>{n.disconnect()},Jd=(n,e,t)=>{e.unobserve_entered&&Ot(n,t)},Tn=(n,e)=>{n&&(n.loadingCount+=e)},ep=n=>{n&&(n.toLoadCount-=1)},Na=(n,e)=>{n&&(n.toLoadCount=e)},tp=n=>n.loadingCount>0,np=n=>n.toLoadCount>0,Ba=n=>{let e=[];for(let t,l=0;t=n.children[l];l+=1)t.tagName==="SOURCE"&&e.push(t);return e},jn=(n,e)=>{const t=n.parentNode;t&&t.tagName==="PICTURE"&&Ba(t).forEach(e)},Da=(n,e)=>{Ba(n).forEach(e)},Pt=[_e],Fa=[_e,Ta],vt=[_e,In,Rn],Wa=[ja],Nt=n=>!!n[$t],qa=n=>n[$t],Ga=n=>delete n[$t],Ne=(n,e)=>{if(Nt(n))return;const t={};e.forEach(l=>{t[l]=n.getAttribute(l)}),n[$t]=t},lp=n=>{Nt(n)||(n[$t]={backgroundImage:n.style.backgroundImage})},Me=(n,e)=>{if(!Nt(n))return;const t=qa(n);e.forEach(l=>{((i,a,o)=>{o?i.setAttribute(a,o):i.removeAttribute(a)})(n,l,t[l])})},ap=n=>{if(!Nt(n))return;const e=qa(n);n.style.backgroundImage=e.backgroundImage},Za=(n,e,t)=>{Ge(n,e.class_applied),He(n,Ua),t&&(e.unobserve_completed&&Ot(n,e),ze(e.callback_applied,n,t))},Ya=(n,e,t)=>{Ge(n,e.class_loading),He(n,En),t&&(Tn(t,1),ze(e.callback_loading,n,t))},Ie=(n,e,t)=>{t&&n.setAttribute(e,t)},Ll=(n,e)=>{Ie(n,Rn,de(n,e.data_sizes)),Ie(n,In,de(n,e.data_srcset)),Ie(n,_e,de(n,e.data_src))},ip=(n,e)=>{jn(n,t=>{Ne(t,vt),Ll(t,e)}),Ne(n,vt),Ll(n,e)},op=(n,e)=>{Ne(n,Pt),Ie(n,_e,de(n,e.data_src))},rp=(n,e)=>{Da(n,t=>{Ne(t,Pt),Ie(t,_e,de(t,e.data_src))}),Ne(n,Fa),Ie(n,Ta,de(n,e.data_poster)),Ie(n,_e,de(n,e.data_src)),n.load()},sp=(n,e)=>{Ne(n,Wa),Ie(n,ja,de(n,e.data_src))},cp=(n,e,t)=>{const l=de(n,e.data_bg),i=de(n,e.data_bg_hidpi),a=za&&i?i:l;a&&(n.style.backgroundImage=`url("${a}")`,Pa(n).setAttribute(_e,a),Ya(n,e,t))},up=(n,e,t)=>{const l=de(n,e.data_bg_multi),i=de(n,e.data_bg_multi_hidpi),a=za&&i?i:l;a&&(n.style.backgroundImage=a,Za(n,e,t))},dp=(n,e,t)=>{const l=de(n,e.data_bg_set);if(!l)return;let i=l.split("|").map(a=>`image-set(${a})`);n.style.backgroundImage=i.join(),Za(n,e,t)},Ka={IMG:ip,IFRAME:op,VIDEO:rp,OBJECT:sp},pp=(n,e)=>{const t=Ka[n.tagName];t&&t(n,e)},hp=(n,e,t)=>{const l=Ka[n.tagName];l&&(l(n,e),Ya(n,e,t))},mp=["IMG","IFRAME","VIDEO","OBJECT"],vp=n=>mp.indexOf(n.tagName)>-1,Qa=(n,e)=>{!e||tp(e)||np(e)||ze(n.callback_finish,e)},Il=(n,e,t)=>{n.addEventListener(e,t),n.llEvLisnrs[e]=t},gp=(n,e,t)=>{n.removeEventListener(e,t)},Mn=n=>!!n.llEvLisnrs,fp=(n,e,t)=>{Mn(n)||(n.llEvLisnrs={});const l=n.tagName==="VIDEO"?"loadeddata":"load";Il(n,l,e),Il(n,"error",t)},on=n=>{if(!Mn(n))return;const e=n.llEvLisnrs;for(let t in e){const l=e[t];gp(n,t,l)}delete n.llEvLisnrs},Xa=(n,e,t)=>{Qd(n),Tn(t,-1),ep(t),ge(n,e.class_loading),e.unobserve_completed&&Ot(n,t)},kp=(n,e,t,l)=>{const i=Sn(e);Xa(e,t,l),Ge(e,t.class_loaded),He(e,Ma),ze(t.callback_loaded,e,l),i||Qa(t,l)},yp=(n,e,t,l)=>{const i=Sn(e);Xa(e,t,l),Ge(e,t.class_error),He(e,An),ze(t.callback_error,e,l),t.restore_on_error&&Me(e,vt),i||Qa(t,l)},rn=(n,e,t)=>{const l=Pa(n)||n;Mn(l)||fp(l,i=>{kp(0,n,e,t),on(l)},i=>{yp(0,n,e,t),on(l)})},sn=(n,e,t)=>{vp(n)?((l,i,a)=>{rn(l,i,a),hp(l,i,a)})(n,e,t):((l,i,a)=>{Kd(l),rn(l,i,a),lp(l),cp(l,i,a),up(l,i,a),dp(l,i,a)})(n,e,t)},wp=(n,e,t)=>{n.setAttribute("loading","lazy"),rn(n,e,t),pp(n,e),He(n,Va)},Rl=n=>{n.removeAttribute(_e),n.removeAttribute(In),n.removeAttribute(Rn)},bp=n=>{jn(n,e=>{Rl(e)}),Rl(n)},Ja=n=>{jn(n,e=>{Me(e,vt)}),Me(n,vt)},$p=n=>{Da(n,e=>{Me(e,Pt)}),Me(n,Fa),n.load()},_p=n=>{Me(n,Pt)},xp=n=>{Me(n,Wa)},Cp={IMG:Ja,IFRAME:_p,VIDEO:$p,OBJECT:xp},Lp=(n,e)=>{(t=>{const l=Cp[t.tagName];l?l(t):ap(t)})(n),((t,l)=>{zn(t)||Sn(t)||(ge(t,l.class_entered),ge(t,l.class_exited),ge(t,l.class_applied),ge(t,l.class_loading),ge(t,l.class_loaded),ge(t,l.class_error))})(n,e),Ht(n),Ga(n)},Ip=(n,e,t,l)=>{t.cancel_on_exit&&qd(n)&&n.tagName==="IMG"&&(on(n),bp(n),Ja(n),ge(n,t.class_loading),Tn(l,-1),Ht(n),ze(t.callback_cancel,n,e,l))},Rp=(n,e,t,l)=>{const i=Yd(n);He(n,Fd),Ge(n,t.class_entered),ge(n,t.class_exited),Jd(n,t,l),ze(t.callback_enter,n,e,l),i||sn(n,t,l)},Ep=(n,e,t,l)=>{zn(n)||(Ge(n,t.class_exited),Ip(n,e,t,l),ze(t.callback_exit,n,e,l))},Ap=["IMG","IFRAME","VIDEO"],ei=n=>n.use_native&&"loading"in HTMLImageElement.prototype,zp=(n,e,t)=>{n.forEach(l=>{Ap.indexOf(l.tagName)!==-1&&wp(l,e,t)}),Na(t,0)},Sp=n=>n.isIntersecting||n.intersectionRatio>0,Tp=(n,e)=>{e.forEach(t=>{n.observe(t)})},jp=(n,e)=>{Xd(n),Tp(n,e)},Mp=(n,e)=>{ei(n)||(e._observer=new IntersectionObserver(t=>{((l,i,a)=>{l.forEach(o=>Sp(o)?Rp(o.target,o,i,a):Ep(o.target,o,i,a))})(t,n,e)},(t=>({root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}))(n)))},ti=n=>Array.prototype.slice.call(n),Mt=n=>n.container.querySelectorAll(n.elements_selector),Up=n=>ti(n).filter(zn),Vp=n=>Gd(n),Hp=n=>ti(n).filter(Vp),El=(n,e)=>Up(n||Mt(e)),Op=(n,e)=>{Hp(Mt(n)).forEach(t=>{ge(t,n.class_error),Ht(t)}),e.update()},Pp=(n,e)=>{Ae&&(e._onlineHandler=()=>{Op(n,e)},window.addEventListener("online",e._onlineHandler))},Np=n=>{Ae&&window.removeEventListener("online",n._onlineHandler)},rt=function(n,e){const t=Sa(n);this._settings=t,this.loadingCount=0,Mp(t,this),Pp(t,this),this.update(e)};rt.prototype={update:function(n){const e=this._settings,t=El(n,e);Na(this,t.length),Aa?this.loadAll(t):ei(e)?zp(t,e,this):jp(this._observer,t)},destroy:function(){this._observer&&this._observer.disconnect(),Np(this),Mt(this._settings).forEach(n=>{Ga(n)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(n){const e=this._settings;El(n,e).forEach(t=>{Ot(t,this),sn(t,e,this)})},restoreAll:function(){const n=this._settings;Mt(n).forEach(e=>{Lp(e,n)})}},rt.load=(n,e)=>{const t=Sa(e);sn(n,t)},rt.resetStatus=n=>{Ht(n)},Ae&&Dd(rt,window.lazyLoadOptions);function Bp(n={}){return document.querySelectorAll(".lazy").forEach(e=>{const t=e.getAttribute("src");e.removeAttribute("src"),e.setAttribute("data-src",t??"")}),new rt({elements_selector:".lazy",...n})}function Dp(){const n=Wl();n.value.vanillaLazyload.enable&&ve(()=>{Bp(n.value.vanillaLazyload)})}function Fp(){ki&&window.addEventListener("click",n=>{var t;const e=n.target;if(e.matches(".vp-code-group input")){const l=(t=e.parentElement)==null?void 0:t.parentElement;if(!l)return;const i=Array.from(l.querySelectorAll("input")).indexOf(e);if(i<0)return;const a=l.querySelector(".blocks");if(!a)return;const o=Array.from(a.children).find(d=>d.classList.contains("active"));if(!o)return;const r=a.children[i];if(!r||o===r)return;o.classList.remove("active"),r.classList.add("active");const s=l==null?void 0:l.querySelector(`label[for="${e.id}"]`);s==null||s.scrollIntoView({block:"nearest"})}})}const Wp={key:0,text:"center"},qp=["href"],Gp={m:"y-4",class:"end flex justify-center items-center"},Zp=m("hr",{class:"line inline-flex",w:"full",m:"!y-2"},null,-1),Yp={p:"x-4",font:"bold",class:"whitespace-nowrap"},Kp=m("hr",{class:"line inline-flex",w:"full",m:"!y-2"},null,-1),Qp=ne({__name:"ValaxyMd",props:{frontmatter:{},excerpt:{}},setup(n){const e=n,{t}=Be(),l=E();return ql(()=>{yi(l.value)}),ve(()=>{Ct()}),wi(()=>{Ct()}),e.frontmatter.aplayer&&bi(),e.frontmatter.codepen&&$i(),_i(),Fp(),xi(),(typeof e.frontmatter.medium_zoom>"u"||e.frontmatter.medium_zoom)&&Ci(),Dp(),(i,a)=>i.$slots.default?(u(),v("article",{key:0,class:B(i.frontmatter.markdown!==!1&&"markdown-body")},[ie(i.$slots,"default",{ref_key:"contentRef",ref:l,onVnodeUpdated:a[0]||(a[0]=(...o)=>k(Ct)&&k(Ct)(...o))}),i.frontmatter.url?(u(),v("div",Wp,[m("a",{href:i.frontmatter.url,class:"post-link-btn shadow hover:shadow-md",rounded:"",target:"_blank",m:"b-4"},z(k(t)("post.view_link")),9,qp)])):I("v-if",!0),i.frontmatter.end!==void 0?ie(i.$slots,"end",{key:1},()=>[m("div",Gp,[Zp,m("span",Yp,z(i.frontmatter.end?"Q.E.D.":"To Be Continued."),1),Kp])]):I("v-if",!0)],2)):I("v-if",!0)}}),Xp={key:0,class:"yun-time-warning",op:"80"},Jp=ne({__name:"YunMdTimeWarning",setup(n){const e=un();Lt.extend(Li);const{t}=Be(),l=N(()=>{const i=Lt().valueOf()-Lt(e.value.updated||e.value.date).valueOf();return typeof e.value.time_warning=="number"?i>e.value.time_warning:e.value.time_warning});return(i,a)=>l.value?(u(),v("blockquote",Xp,z(k(t)("post.time_warning",{ago:k(Lt)(k(e).updated).fromNow()})),1)):I("v-if",!0)}}),eh={class:"ai-generated-excerpt rounded-lg bg-$va-c-bg-alt p-4"},th={font:"black",flex:"","items-center":""},nh=m("div",{"mr-1":"","i-ri-robot-2-line":""},null,-1),lh={op:"90","mt-1":""},ah=ne({__name:"YunAiExcerpt",setup(n){const e=un(),{t}=Be();return(l,i)=>(u(),v("div",eh,[m("div",th,[nh,m("div",null,z(k(t)("excerpt.ai")),1)]),m("div",lh,z(k(e).excerpt),1)]))}}),ih={class:"yun-main md:pl-$va-sidebar-width lt-md:ml-0",flex:"~"},oh={w:"full",flex:"~"},rh={p:"x-4 b-8",class:"sm:px-6 lg:px-12 xl:px-16",w:"full"},mh=ne({__name:"ValaxyMain",props:{frontmatter:{},data:{}},setup(n){const e=n,t=Wl(),{styles:l,icon:i,color:a}=Ii(e.frontmatter.type),o=Ri(N(()=>e.frontmatter)),r=N(()=>e.frontmatter.aside!==!1),s=Dl(),d=Ei();return pn(()=>{s.hash&&setTimeout(()=>{Un(document.body,s.hash,!0)},0)}),ql(()=>{window.addEventListener("click",async c=>{const w=c.target.closest("a");if(w){const{protocol:p,hostname:$,pathname:S,hash:_,target:b}=w,h=window.location,y=S.match(/\.\w+$/);!c.ctrlKey&&!c.shiftKey&&!c.altKey&&!c.metaKey&&b!=="_blank"&&p===h.protocol&&$===h.hostname&&!(y&&y[0]!==".html")&&S===h.pathname&&(c.preventDefault(),_&&_!==h.hash&&(await d.push({hash:decodeURIComponent(_)}),Un(w,_,w.classList.contains("header-anchor"))))}},{capture:!0})}),(c,w)=>{const p=zi,$=ah,S=Jp,_=Qp,b=Gl,h=Nd,y=Td,V=Ai,M=Yi;return u(),v("main",ih,[m("div",oh,[ie(c.$slots,"main",{},()=>[m("div",{class:B(["content",!r.value&&"no-aside"]),flex:"~ col grow",w:"full",p:"l-4 lt-md:0"},[P(b,{cover:c.frontmatter.cover,m:"0",class:"relative",style:dt(k(l))},{default:Ce(()=>[ie(c.$slots,"main-header",{},()=>[P(p,{class:"mb-2",title:k(o),icon:c.frontmatter.icon||k(i),color:c.frontmatter.color||k(a),cover:c.frontmatter.cover},null,8,["title","icon","color","cover"])]),ie(c.$slots,"main-header-after"),m("div",rh,[ie(c.$slots,"main-content",{},()=>[I(" <Transition appear> "),P(_,{frontmatter:c.frontmatter},{default:Ce(()=>[c.frontmatter.excerpt_type==="ai"&&c.frontmatter.excerpt?(u(),K($,{key:0})):I("v-if",!0),P(S),ie(c.$slots,"main-content-md"),ie(c.$slots,"default")]),_:3},8,["frontmatter"]),I(" </Transition> ")]),ie(c.$slots,"main-content-after")])]),_:3},8,["cover","style"]),ie(c.$slots,"main-nav-before"),ie(c.$slots,"main-nav",{},()=>[c.frontmatter.nav!==!1?(u(),K(h,{key:0})):I("v-if",!0)]),ie(c.$slots,"main-nav-after"),k(t).comment.enable&&c.frontmatter.comment!==!1?ie(c.$slots,"comment",{key:0},()=>[P(y,{class:B(c.frontmatter.nav===!1?"mt-4":0)},null,8,["class"])]):I("v-if",!0),ie(c.$slots,"main-footer-before"),P(V),ie(c.$slots,"main-footer-after")],2)]),ie(c.$slots,"aside",{},()=>[r.value?(u(),K(M,{key:0},{default:Ce(()=>[ie(c.$slots,"aside-custom")]),_:3})):I("v-if",!0)])])])}}});export{mh as _};
